/*! @build 2.5.2 getsitecontrol aa24936e6dccea027cdf */!function(t){function e(e){for(var n,i,o=e[0],s=e[1],a=0,l=[];a<o.length;a++)i=o[a],{}.hasOwnProperty.call(r,i)&&r[i]&&l.push(r[i][0]),r[i]=0;for(n in s)({}).hasOwnProperty.call(s,n)&&(t[n]=s[n]);for(c&&c(e);l.length;)l.shift()()}var n={},r={0:0};function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(){return Promise.resolve()},i.m=t,i.c=n,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return{}.hasOwnProperty.call(t,e)},i.p="https://s2.getsitecontrol.com/widgets/es6/",i.oe=function(t){throw t};var o=window.webpackJsonp_getsitecontrol=window.webpackJsonp_getsitecontrol||[],s=o.push.bind(o);o.push=e,o=o.slice();for(var a=0;a<o.length;a++)e(o[a]);var c=s;i(i.s="oqNQ")}({"0iFO":function(t,e,n){function r(t,e={},n=o,r=!0){if(t&&e&&/{{.+}}/.test(t)){const i=Object.keys(e).reduce(((t,n)=>(t[n.toLowerCase()]=e[n],t)),{});return t.replace(/{{(!)?(=)? *(.+?)}}/gi,((t,o,s,a)=>{let c;if(s)try{c=function(t,e={}){const n=Object.assign(Object.assign({},function(t){let e=(t,e,n)=>function(t,e,n){const r=e?{style:"currency",currency:e}:{minimumFractionDigits:2};return new Intl.NumberFormat(n||navigator.language,r).format(t)}(t,e,n);var n;return"string"==typeof t.$CURRENCY_FORMAT&&(n=t.$CURRENCY_FORMAT,e=t=>n.replace(/{{ *(\w+) *}}/,((e,n)=>"amount_no_decimals_with_comma_separator"===n?t.toLocaleString("de",{maximumFractionDigits:0}):"amount_with_comma_separator"===n?t.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2}):"amount_no_decimals"===n?t.toLocaleString("en",{maximumFractionDigits:0}):t.toLocaleString("en",{minimumFractionDigits:2,maximumFractionDigits:2})))),{IF:(t,e,n)=>t?e:n,ROUND:(t,e=0)=>{const n=Math.round(Math.pow(10,e));return Math.round(n*t)/n},CURRENCY:e}}(e)),e),r=Object.keys(n),i=r.map((t=>n[t]));return t='"use strict"; return '+t,Function.constructor.apply({},r.concat([t])).apply({},i)}(a,e)}catch(l){}else{const t=a.match(/^ *(\$?\w+?) *(\|.*)? *$/i);if(t){const[e,n]=[t[1].toLowerCase(),t[2]];(function(t,e){return{}.hasOwnProperty.call(t,e)})(i,e)&&(c=i[e]),null==c&&(c=n&&n.substr(1).trim())}}if(null==c){if(!r)return t;c=""}return n&&"!"!==o?n(""+c):""+c}))}return t}n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return r}));const i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};function o(t){return t.replace(/[&<>"'`]/g,(t=>i[t]))}function s(t){return t.charAt(0).toUpperCase()+t.slice(1)}},D57K:function(t,e,n){function r(t,e){var n={};for(var r in t)({}).hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&{}.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}n.d(e,"a",(function(){return r}))},"MN/D":function(t,e,n){var r;!function(i){function o(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function s(t,e,n,r,i,s){return o((a=o(o(e,t),o(r,s)))<<(c=i)|a>>>32-c,n);var a,c}function a(t,e,n,r,i,o,a){return s(e&n|~e&r,t,e,i,o,a)}function c(t,e,n,r,i,o,a){return s(e&r|n&~r,t,e,i,o,a)}function l(t,e,n,r,i,o,a){return s(e^n^r,t,e,i,o,a)}function u(t,e,n,r,i,o,a){return s(n^(e|~r),t,e,i,o,a)}function d(t,e){var n,r,i,s,d;t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;var h=1732584193,p=-271733879,g=-1732584194,f=271733878;for(n=0;n<t.length;n+=16)r=h,i=p,s=g,d=f,h=a(h,p,g,f,t[n],7,-680876936),f=a(f,h,p,g,t[n+1],12,-389564586),g=a(g,f,h,p,t[n+2],17,606105819),p=a(p,g,f,h,t[n+3],22,-1044525330),h=a(h,p,g,f,t[n+4],7,-176418897),f=a(f,h,p,g,t[n+5],12,1200080426),g=a(g,f,h,p,t[n+6],17,-1473231341),p=a(p,g,f,h,t[n+7],22,-45705983),h=a(h,p,g,f,t[n+8],7,1770035416),f=a(f,h,p,g,t[n+9],12,-1958414417),g=a(g,f,h,p,t[n+10],17,-42063),p=a(p,g,f,h,t[n+11],22,-1990404162),h=a(h,p,g,f,t[n+12],7,1804603682),f=a(f,h,p,g,t[n+13],12,-40341101),g=a(g,f,h,p,t[n+14],17,-1502002290),h=c(h,p=a(p,g,f,h,t[n+15],22,1236535329),g,f,t[n+1],5,-165796510),f=c(f,h,p,g,t[n+6],9,-1069501632),g=c(g,f,h,p,t[n+11],14,643717713),p=c(p,g,f,h,t[n],20,-373897302),h=c(h,p,g,f,t[n+5],5,-701558691),f=c(f,h,p,g,t[n+10],9,38016083),g=c(g,f,h,p,t[n+15],14,-660478335),p=c(p,g,f,h,t[n+4],20,-405537848),h=c(h,p,g,f,t[n+9],5,568446438),f=c(f,h,p,g,t[n+14],9,-1019803690),g=c(g,f,h,p,t[n+3],14,-187363961),p=c(p,g,f,h,t[n+8],20,1163531501),h=c(h,p,g,f,t[n+13],5,-1444681467),f=c(f,h,p,g,t[n+2],9,-51403784),g=c(g,f,h,p,t[n+7],14,1735328473),h=l(h,p=c(p,g,f,h,t[n+12],20,-1926607734),g,f,t[n+5],4,-378558),f=l(f,h,p,g,t[n+8],11,-2022574463),g=l(g,f,h,p,t[n+11],16,1839030562),p=l(p,g,f,h,t[n+14],23,-35309556),h=l(h,p,g,f,t[n+1],4,-1530992060),f=l(f,h,p,g,t[n+4],11,1272893353),g=l(g,f,h,p,t[n+7],16,-155497632),p=l(p,g,f,h,t[n+10],23,-1094730640),h=l(h,p,g,f,t[n+13],4,681279174),f=l(f,h,p,g,t[n],11,-358537222),g=l(g,f,h,p,t[n+3],16,-722521979),p=l(p,g,f,h,t[n+6],23,76029189),h=l(h,p,g,f,t[n+9],4,-640364487),f=l(f,h,p,g,t[n+12],11,-421815835),g=l(g,f,h,p,t[n+15],16,530742520),h=u(h,p=l(p,g,f,h,t[n+2],23,-995338651),g,f,t[n],6,-198630844),f=u(f,h,p,g,t[n+7],10,1126891415),g=u(g,f,h,p,t[n+14],15,-1416354905),p=u(p,g,f,h,t[n+5],21,-57434055),h=u(h,p,g,f,t[n+12],6,1700485571),f=u(f,h,p,g,t[n+3],10,-1894986606),g=u(g,f,h,p,t[n+10],15,-1051523),p=u(p,g,f,h,t[n+1],21,-2054922799),h=u(h,p,g,f,t[n+8],6,1873313359),f=u(f,h,p,g,t[n+15],10,-30611744),g=u(g,f,h,p,t[n+6],15,-1560198380),p=u(p,g,f,h,t[n+13],21,1309151649),h=u(h,p,g,f,t[n+4],6,-145523070),f=u(f,h,p,g,t[n+11],10,-1120210379),g=u(g,f,h,p,t[n+2],15,718787259),p=u(p,g,f,h,t[n+9],21,-343485551),h=o(h,r),p=o(p,i),g=o(g,s),f=o(f,d);return[h,p,g,f]}function h(t){var e,n="",r=32*t.length;for(e=0;e<r;e+=8)n+=String.fromCharCode(t[e>>5]>>>e%32&255);return n}function p(t){var e,n=[];for(n[(t.length>>2)-1]=void 0,e=0;e<n.length;e+=1)n[e]=0;var r=8*t.length;for(e=0;e<r;e+=8)n[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return n}function g(t){var e,n,r="0123456789abcdef",i="";for(n=0;n<t.length;n+=1)e=t.charCodeAt(n),i+=r.charAt(e>>>4&15)+r.charAt(15&e);return i}function f(t){return unescape(encodeURIComponent(t))}function m(t){return function(t){return h(d(p(t),8*t.length))}(f(t))}function v(t,e){return function(t,e){var n,r,i=p(t),o=[],s=[];for(o[15]=s[15]=void 0,i.length>16&&(i=d(i,8*t.length)),n=0;n<16;n+=1)o[n]=909522486^i[n],s[n]=1549556828^i[n];return r=d(o.concat(p(e)),512+8*e.length),h(d(s.concat(r),640))}(f(t),f(e))}function b(t,e,n){return e?n?v(e,t):g(v(e,t)):n?m(t):g(m(t))}void 0===(r=function(){return b}.call(e,n,e,t))||(t.exports=r)}()},NkQW:function(t,e,n){n.r(e),n.d(e,"WidgetRuntime",(function(){return Jt}));var r,i=n("D57K");class o{get(t){}set(t,e){}remove(t){}clear(){}}class s{constructor(){this.store={}}get(t){return this.store[t]}set(t,e){this.store[t]=e}remove(t){delete this.store[t]}clear(){this.store={}}}class a{constructor(t){this.name=t}get storage(){throw new Error("not implemented")}loadItem(){const t=this.storage.getItem(this.name);if(null===t)return{};try{return JSON.parse(t)}catch(e){}}get storageName(){return this.name}set(t,e){const n=this.loadItem();n[t]=e,this.storage.setItem(this.name,JSON.stringify(n))}get(t){return this.loadItem()[t]}remove(t){const e=this.loadItem();delete e[t],this.storage.setItem(this.name,JSON.stringify(e))}clear(){this.storage.removeItem(this.name)}}class c extends a{static isSupported(){return!!window.localStorage}get storage(){const t=window.localStorage;if(!t)throw new Error("LocalStorage not supported");return t}}class l extends a{static isSupported(){return!!window.localStorage}get storage(){const t=window.sessionStorage;if(!t)throw new Error("SessionStorage not supported");return t}}class u{constructor(t="local",e="gsc"){this._page=new s,this._static=new s;let n=()=>new s;if("local"===t)c.isSupported()&&(n=t=>new c(t));else if("session"===t)l.isSupported()&&(n=t=>new l(t));else if("memory"===t)n=()=>new s;else{if("disable"!==t)throw new Error("Unknown storage backend "+t);n=()=>new o}this._general=n(e),this._widgets=n(e+"w"),this._goals=n(e+"g"),this._session=n(e+"s")}save(t,e){this._general.set(t,e)}load(t){return this._general.get(t)}saveFor(t,e,n){const r=t.toString();let i=this._widgets.get(r);"object"==typeof i&&i||(i={}),i[e]=n,i.$last=(new Date).getTime(),this._widgets.set(r,i)}loadAllFor(t){const e=t.toString();return this._widgets.get(e)}loadFor(t,e){const n=this.loadAllFor(t);if(n)return n[e]}cleanupWidgets(t){}newSession(t,e){this._session.clear(),this._session.set("id",t),this._session.set("$start",e.getTime())}saveSession(t,e){this._session.set(t,e)}loadSession(t){return this._session.get(t)}cleanupSession(){this._session.clear()}get general(){return this._general}get widgets(){return this._widgets}get goals(){return this._goals}get session(){return this._session}get page(){return this._page}get static(){return this._static}}function d(t,e){let n;return function(){const r=this,i=arguments,o=function(){n=null,t.apply(r,i)};clearTimeout(n),n=setTimeout(o,e)}}function h(t){for(const e of document.cookie.split(";")){const[n,r]=e.split("=").map((t=>t.trim()));if(n==t)return decodeURIComponent(r)}}!function(t){t.User="user",t.Session="session",t.PageView="pageView",t.Show="show",t.Close="close",t.Hide="hide",t.SubmitWidget="submit",t.OpenUrl="openUrl",t.ShowWidget="showWidget",t.CopyToClipboard="copyToClipboard",t.AddToCart="addToCart",t.ApplyCoupon="applyCoupon",t.Goal="goal"}(r||(r={}));const p=[r.SubmitWidget,r.OpenUrl,r.ShowWidget,r.CopyToClipboard,r.ApplyCoupon,r.AddToCart];class g{constructor(t,e,n,r){this.sysname=t,this.value=e,this.hitId=n,this.data=r}asEvent(){const t=Object.assign(Object.assign({},this.data||{}),{$sysname:this.sysname,$value:this.value,$hitId:this.hitId});return new f(r.Goal,null,t)}}class f{constructor(t,e,n){this.type=t,this.widget=e,this.data=n}prettyData(){const t=this.getData();return this.type===r.OpenUrl?t.url:this.type===r.ShowWidget?t.widgetId:t}get key(){const t=JSON.stringify(this.data||{}),e=this.widget?this.widget.id:null;return`${this.type}/${t}/${e}`}getData(){return JSON.parse(JSON.stringify(this.data||{}))}isAction(){return this.type===r.SubmitWidget||this.type===r.ShowWidget||this.type===r.OpenUrl||this.type===r.AddToCart||this.type===r.ApplyCoupon}}class m{constructor(t,e=[]){this.runtime=t,this.subscribers=e,this.events=[],this.processDeb=d(this.process.bind(this),250)}send(t){return this.add(t,!0)}add(t,e=!1){return this.events.some((e=>e.key===t.key))||this.events.push(t),e?this.process():this.processDeb(),!0}process(){const t=this.events.slice();this.events.length=0,t.length>0&&this.collectContext().then((e=>{for(const r of this.subscribers)try{r(t,e)}catch(n){}}))}async collectContext(){const t=this.runtime.session.currentVisit,e=this.runtime.platform,n=new Date,r={userId:t.userId,sessionId:t.sessionId,siteId:this.runtime.settings.siteId,date:n.getTime(),visit:{utm:{medium:t.utm.utm_medium,source:t.utm.utm_source,term:t.utm.utm_term,content:t.utm.utm_content,campaign:t.utm.utm_campaign,method:t.utm.method},source:t.source,referrer:t.referrer,pageNumber:t.pageNumber,sessionNumber:t.sessionNumber,location:t.location,language:t.language,displayWidth:t.displayWidth,displayHeight:t.displayHeight,external:v()},context:this.runtime.args.getParams(!0),placement:this.runtime.settings.placement};if(e){const t=await e.getTrackingContext()||{};r.platform=Object.assign({type:e.name},t)}return r}}function v(){const t={},e=h("hubspotutk");return e&&(t["hubspot.utk"]=e),t}function b(t=""){let e;const n=/\+/g,r=/([^&=]+)=?([^&]*)/g,i=t=>decodeURIComponent(t.replace(n," "));t=t.replace(/^\?/g,"");const o={};for(;e=r.exec(t);)e[1]&&(o[i(e[1])]=e[2]?i(e[2]):"");return o}var _=n("vM0s");const w=864e5;function y(t){return new Date(t.getTime()+w)}function x(t,e){const n=new Date(t.getTime());let r=0;const i=n.getTime(),o=n.getTimezoneOffset();let s=e.untils[r];for(;s&&s-60*(e.offsets[r]-o)*1e3<i;)s=e.untils[++r];return n.setMinutes(n.getMinutes()+e.offsets[r]-o),n}function k(t,e){const n=/^(\d{2}):(\d{2})$/i.exec(t);if(n){const t=new Date(e);return t.setHours(parseInt(n[1])),t.setMinutes(parseInt(n[2])),t.setSeconds(0),t.setMilliseconds(0),t}throw new Error("malformed time "+t)}function O(t){const e=JSON.stringify,n={};return function(){const r=e(arguments);return r in n?n[r]:n[r]=t.apply(this,arguments)}}function S(t){return"string"==typeof t}function j(t){return"number"==typeof t&&!isNaN(t)}function C(t){return j(t)||"string"==typeof t&&parseFloat(t).toString()===t}function E(t){return t&&Array.isArray(t)}const T=O((function(t,e){const n=/^\/(.+)\/([im]+)?$/.exec(t);if(n)return new RegExp(n[1],n[2]||e);const r=t.replace(/[\-\[\]\/{}()?.\\^$|]/g,"\\$&").replace(/\*/g,".*?").replace(/\+/g,".+?");return new RegExp(`^${r}$`,e)}));function P(t){if(S(t))t=t.toLocaleLowerCase();else if(E(t))t=t.map(P);else if("object"==typeof(e=t)&&null!==e&&!E(e)){const e={};t=Object.keys(t).reduce((function(e,n){return e[n]=P(t[n]),e}),e)}var e;return t}function I(t){return!(!t||!t.exec)}const A="(0?[\\d\\*]+|0x[a-f0-9]+)",N=new RegExp(`^${A}\\.${A}\\.${A}\\.${A}$`,"i"),$="(?:[0-9a-f\\*]+::?)+",D={native:new RegExp(`^(::)?(${$})?([0-9a-f\\*]+)?(::)?$`,"i"),transitional:new RegExp(`^((?:${$})|(?:::)(?:${$})?)${A}\\.${A}\\.${A}\\.${A}$`,"i")};class L{constructor(t){if(this.octets=[],this.cidr=NaN,this.version=NaN,this.maxcidr=NaN,this.masked=!1,this.octets=[],this.cidr=NaN,this.version=NaN,this.maxcidr=NaN,this.masked=!1,!t)throw new Error("no addr");if(t.match(/\//)){const e=t.split("/");t=e[0],this.cidr=parseInt(e[1])}if(t.match(/:/)){if(this.version=6,this.maxcidr=128,this.octets=function(t){if(t.match(D.native))return function(t,e){if(t.indexOf("::")!==t.lastIndexOf("::"))return null;let n=0,r=-1;for(;(r=t.indexOf(":",r+1))>=0;)n++;":"===t[0]&&n--,":"===t[t.length-1]&&n--;let i=8-n,o=":";for(;i--;)o+="0:";return":"===(t=t.replace("::",o))[0]&&(t=t.slice(1)),":"===t[t.length-1]&&(t=t.slice(0,-1)),t.split(":").map((t=>/\*/.test(t)?new RegExp(`^${t.replace(/\*/g,".*")}$`,"i"):parseInt(t,16)))}(t)}(t),!this.octets)throw new Error("parse error");if(this.cidr>this.maxcidr)throw new Error("max cidr");for(const t of this.octets)if(!(0<=t&&t<=65535||I(t)))throw new Error("ipv6 part should fit to two octets")}else if(t.length>=7){if(this.version=4,this.maxcidr=32,this.octets=function(t){const e=t.match(N);if(e)return e.slice(1,6).map((t=>{return/\*/.test(e=t)?new RegExp(`^${e.replace(/\*/g,".*")}$`,"i"):"0"===e[0]&&"x"!==e[1]?parseInt(e,8):parseInt(e);var e}))}(t),!this.octets)throw new Error("parse error");for(const t of this.octets)if(!(0<=t&&t<=255||I(t)))throw new Error("ipv4 octet is a byte");if(this.cidr>this.maxcidr)throw new Error("max cidr")}if(!this.octets||isNaN(this.version))throw new Error("parse error");for(const e of this.octets)if(I(e)){this.masked=!0;break}if(!isNaN(this.cidr)&&this.masked)throw new Error("cidr and masked")}match(t){if(t.version!==this.version||t.masked||!isNaN(t.cidr)||this.octets.length!==t.octets.length)return!1;let e=!0;if(this.masked||!this.cidr)for(let n=0;n<this.octets.length;n++){const r=this.octets[n],i=t.octets[n];e&&(e=I(r)&&j(i)?r.test(6===t.version?i.toString(16):i.toString()):r===t.octets[n])}else e=function(t,e,n,r){let i=0;for(;r>0;){let o=n-r;if(o<0&&(o=0),t[i]>>o!=e[i]>>o)return!1;r-=n,i+=1}return!0}(this.octets,t.octets,6===this.version?16:8,this.cidr);return e}}const R=/^((https?:)?\/\/)?([^\/?#]+)?(\/[^?#]*)?(\?[^#]*)?(#.*)?$/i,W=Object.keys;function M(t){return t.replace(/^#!?\/?/,"/")}function U(t,e){const n=function(t){const e=t.match(R),[n,,r="http",i="*",o="",s="",a=""]=e,c={href:n,hostname:i,search:s,hash:a,protocol:r+"//",pathname:(l=o,"/"+l.replace(/^\/+/,"").replace(/\/$/,""))};var l;return c.href=c.protocol+c.hostname+c.pathname+c.search+c.hash,c}(t);return e.reduce(((t,e)=>{switch(e){case"hostname":t.hostname=Object(_.toUnicode)(n.hostname);break;case"pathname":t.pathname=decodeURIComponent(n.pathname);break;default:t[e]=n[e]}return t}),{})}function F(t){return decodeURIComponent(t.replace(/\+/g," "))}function V(t){const e={},n=/([^&=]+)=?([^&]*)/g;let r;for(t=t.replace(/^\?/g,"");r=n.exec(t);)e[F(r[1])]=F(r[2]);return e}const z=O((function t(e,n,r=["hostname","pathname","search","hash"]){const i=U(e,r),o=U(n,r),s=W(o);return s.filter((e=>{const n=o[e],r=i[e];if(n===r)return!0;if("search"===e){const t="",e=V(r),i=W(e),o=V(n);return W(o).every((n=>{const r=T(o[n],t),s=T(n,t);let a=!1;for(const t of i)if(s.test(t)&&(a=!0,!r.test(e[t])))return!1;return a}))}if("hash"===e)return!n||t(M(r),M(n),["hostname","pathname","search"]);if("pathname"===e){const t=T(n,"i");return t.test(r)||t.test(r+"/")}return T(n,"i").test(r)})).length===s.length}));function H(t,e,n,r){const i=t(e,n,r);return Array.isArray(i)?[!i[0],i[1]]:!i}function B(t,e,n){return C(e)&&C(t)?n(parseFloat(e),parseFloat(t)):null!=e&&null!=t&&n(e.toString(),t.toString())}const q={"*"(t,e){return!this[void 0](t,e)},undefined:(t,e)=>null==e,"=":(t,e)=>e==t,"!="(t,e){return!this["="](t,e)},in:(t,e)=>S(t)&&S(e)&&-1!==e.indexOf(t),"!in"(t,e){return!this.in(t,e)},match:(t,e)=>S(t)&&S(e)&&T(t).test(e),"!match"(t,e){return!this.match(t,e)},$:(t,e)=>S(t)&&S(e)&&e.substring(e.length-t.length)===t,"^":(t,e)=>S(t)&&S(e)&&0===e.indexOf(t),"!^"(t,e){return H(this["^"],t,e)},"<":(t,e)=>B(t,e,((t,e)=>t<e)),"<=":(t,e)=>B(t,e,((t,e)=>t<=e)),">":(t,e)=>B(t,e,((t,e)=>t>e)),">|undefined"(t,e){return this[void 0](t,e)||this[">"](t,e)},">=":(t,e)=>B(t,e,((t,e)=>t>=e)),matchUrl:(t,e)=>S(t)&&S(e)&&z(e,t),"!matchUrl"(t,e){return H(this.matchUrl,t,e)},time:(t,e,n)=>j(e)&&S(t)&&function(t,e,n){try{let r=new Date(t);const{from:i,to:o,timezone:s}=function(t,e){const[n,r,i=""]=t.split("|");return{from:n?k(n,e):void 0,to:r?k(r,e):void 0,timezone:i}}(e,t),a=n&&n[s||""]||{offsets:[0],untils:[0]};if(!i&&!o)return[!1,"empty time interval"];const c=i?x(i,a):void 0;let l=o?x(o,a):void 0;return l&&c&&(l<c&&(l=y(l)),r<c&&(r=y(r))),[(!c||r>=c)&&(!l||r<=l)]}catch(r){return[!1,r.message]}}(e,t,n&&n.timezones),"!time"(t,e,n){return H(this.time,t,e,n)},matchIp:(t,e)=>S(t)&&S(e)&&function(t,e){try{const n=new L(e),r=new L(t);return[n.match(r)]}catch(n){return[!1,n.message]}}(e,t),"!matchIp"(t,e){return H(this.matchIp,t,e)},date:(t,e)=>j(e)&&S(t)&&function(t,e){try{const r=new Date(t),{from:i,to:o}=function(t){const[e,n]=t.split("|");return{from:e?new Date(e+"T00:00:00"):void 0,to:n?new Date(n+"T00:00:00"):void 0}}(e);if(!i&&!o)throw new Error("no dates");const s=new Date(i||r),a=(n=new Date(o||r),new Date(n.getTime()+w-1));return[s<=r&&r<=a]}catch(r){return[!1,r.message]}var n}(e,t),"!date"(t,e){return H(this.date,t,e)},ina(t,e){return r=e,!(!E(n=t)&&!E(r))&&(E(n)||(n=[n]),E(r)||(r=[r]),n.some((t=>-1!==r.indexOf(t))));var n,r},"!ina"(t,e){return H(this.ina,t,e)}};function G(t,{type:e,name:n}){let r=t[e];return"function"==typeof r?r=r(n):null!=r&&"object"==typeof r&&n&&(r=r[n]),r}const J=["date","!date","time","!time","matchUrl","!matchUrl","undefined","*"];function K(t,{operation:e,value:n},r){let i=t=>t;return J.includes(e)||(i=P),q[e](i(n),i(t),r)}function Y(t){return t.hasOwnProperty("items")}const X={and:(t,e)=>t&&e,or:(t,e)=>t||e};function Q({id:t="",items:e,operation:n},r,i,o){const s=o+">"+t,a={id:t,operation:n,items:[]};let c=0===e.length||function(t){return"and"===t}(n);const l=X[n];for(const u of e)if(Y(u)){const[t,e]=Q(u,r,i,s);c=l(c,t),a.items.push(e)}else{const t=G(r,u);let e;if(u.hasOwnProperty("result")&&t===u.envValue)e=u.result,a.items.push(u);else{let n;e=K(t,u,i),Array.isArray(e)&&(n=e[1],e=e[0]),a.items.push(Object.assign(Object.assign({},u),{envValue:t,result:e,path:s,message:n}))}c=l(c,e)}return[c,a]}function Z({group:t,data:e={timezones:{}}}){return function(n,r){return Q(r||t,n,e,"")}}var tt,et;!function(t){t.Random="ab",t.Location="location",t.Geo="geo",t.OS="os",t.Platform="platform",t.Browser="browser",t.Language="language",t.DisplayWidth="displayWidth",t.DisplayHeight="displayHeight",t.Source="source",t.Referrer="referrer",t.PageNumber="pageNumber",t.SessionNumber="sessionNumber",t.IsReturning="isReturning",t.Utm="utm",t.Api="api",t.Cookie="cookie",t.CssSelector="cssSelector",t.Ip="ip",t.Auto="atonce",t.ExitAttempted="exitAttempted",t.ScrollPercent="scrollPercent",t.TimeOnPage="timeOnPage",t.TimeOnSite="timeOnSite",t.TimeIdle="timeIdle",t.TimeDisplay="timeDisplay",t.TimeSinceAction="timeSinceAction",t.TimeSinceLastAction="timeSinceLastAction",t.ActionCount="actionCount",t.TimeSinceLastClose="timeSinceLastClose",t.CloseCount="closeCount",t.TimeSinceLastHide="timeSinceLastHide",t.HideCount="hideCount",t.TimeSinceLastShow="timeSinceLastShow",t.ShowCount="showCount",t.Date="date",t.Time="time",t.Weekday="weekday",t.CartItemCount="cartItemCount",t.CartProduct="cartProduct",t.CartProductType="cartProductType",t.CartVariant="cartVariant",t.CartDiscount="cartDiscount",t.CartTotalPrice="cartTotalPrice",t.CustomerId="customerId",t.CustomerOrderCount="customerOrderCount",t.CustomerTag="customerTag",t.CustomerTotalSpent="customerTotalSpent",t.CustomerAcceptsMarketing="customerAcceptsMarketing",t.ProductId="productId",t.ProductTag="productTag",t.ProductType="productType",t.ProductVendor="productVendor",t.VariantId="variantId",t.VariantPrice="variantPrice",t.VariantAvailable="variantAvailable",t.VariantOptions="variantOptions",t.AddToCart="addToCart",t.RemoveFromCart="removeFromCart"}(tt||(tt={})),function(t){t.Location="TargetingGroupLocation",t.General="TargetingGroupGeneral",t.Start="TargetingGroupStart",t.Hide="TargetingGroupHide",t.Stop="TargetingGroupStop",t.Schedule="TargetingGroupSchedule"}(et||(et={}));var nt=n("SKuX");class rt{constructor(){this.handlers={}}on(t,e){return this.handlers[t]?this.handlers[t].push(e):this.handlers[t]=[e],this}off(t,e){if(this.handlers[t])if(e)for(let n=0;n<this.handlers[t].length;n++)this.handlers[t][n]===e&&this.handlers[t].splice(n,1);else delete this.handlers[t];return this}one(t,e){const n=(...r)=>(e.apply(this,r),this.off(t,n));return this.on(t,n)}trigger(t,...e){const n={result:!0,stop:!1};if(this.handlers[t])for(const r of this.handlers[t])n.stop||(n.out=r.apply(this,[n].concat(e)),n.result=n.result&&(void 0===n.out||!!n.out));return n}proxy(t,e,n=t){e.on(t,((t,...e)=>this.trigger(n,...e)))}}function it(t){const e=document.querySelector(t);if(e)return(e.innerText||"").trim()}var ot=n("dbSD");const st={sensitivity:20,startCapturingAfter:1e3},at=window.XMLHttpRequest.prototype.open;function ct(t,e,...n){if(dt){const n=this.onreadystatechange;this.onreadystatechange=(...r)=>{if(this.readyState===XMLHttpRequest.DONE&&dt)try{const n=Promise.resolve({body:this.responseText,status:this.status});dt.trigger("request",{method:t,url:e,response:n})}catch(i){}n&&n.apply(this,r)}}return at.apply(this,[t,e,...n])}const lt=window.fetch;function ut(...t){const e=lt.apply(this,t);if(e&&"function"==typeof e.then){const n=t;e.then((t=>{if(dt)try{let e;const r=t.clone().text().then((e=>({status:t.status,body:e})));if(1===n.length){const t=n[0];e="string"==typeof t?{method:"GET",url:t,response:r}:{method:t.method,url:t.url,response:r}}else 2===n.length&&(e={method:n[1].method,url:n[0],response:r});e&&dt.trigger("request",e)}catch(e){}})).catch((()=>{}))}return e}let dt,ht=!1;const pt=[tt.CssSelector,tt.Cookie,tt.TimeDisplay,tt.TimeSinceAction],gt=[tt.ScrollPercent,tt.TimeOnPage,tt.TimeOnSite,tt.TimeIdle,...pt],ft=[tt.ExitAttempted,...gt],mt={timerEnabled:!1,timerResolution:500,updateByTimer:!1,runBounce:!1,runActivity:!1,runScroll:!1},vt={exitAttempted:!1,lastActivity:new Date,scrollPercent:0};class bt extends rt{constructor(t,e){super(),this.options=Object.assign({},mt),this.enabledKeys={},this.watches=vt,this.ajaxWatchers=[],this.prevValue=null,this.configure(e),this.reset(t),this.options.runBounce&&function(t,e=document.documentElement,n=st){const r=d(t,100),i=t=>{t.clientY<n.sensitivity&&r()},o=e=>{(e.metaKey||e.ctrlKey)&&76===e.keyCode&&t()},s=!Object(ot.a)().events.passiveSupported||{passive:!0,capture:!0};setTimeout((()=>{e.addEventListener("mouseout",i,s),e.addEventListener("keydown",o,s)}),n.startCapturingAfter)}((()=>{this.watches.exitAttempted=!0,this.update()})),this.options.runScroll&&function(t){const e=document.documentElement,n=()=>{const n=Math.max(document.body.scrollHeight,document.body.offsetHeight,e.scrollHeight,e.offsetHeight,e.clientHeight),r=((window.pageYOffset||e.scrollTop)+(window.innerHeight||e.clientHeight))/n*100;t(Math.round(r))};window.addEventListener("scroll",n,!Object(ot.a)().events.passiveSupported||{passive:!0,capture:!1}),window.addEventListener("onload",(()=>n()))}((t=>{this.watches.scrollPercent=t})),this.options.runActivity&&function(t){const e=()=>t(),n=()=>t(),r=()=>t(),i=()=>t(),o=!Object(ot.a)().events.passiveSupported||{passive:!0,capture:!0};setTimeout((()=>{window.addEventListener("click",e,o),window.addEventListener("mousemove",e,o),window.addEventListener("mouseenter",e,o),window.addEventListener("mousewheel",e,o),window.addEventListener("keydown",n,o),window.addEventListener("scroll",r,o),window.addEventListener("touchmove",i,o),window.addEventListener("touchstart",i,o)}),100)}((t=>{this.watches.lastActivity=new Date})),this.options.timerEnabled&&setInterval((()=>this.update()),this.options.timerResolution)}configure(t){t.forEach((t=>{-1!==ft.indexOf(t)&&(this.enabledKeys[t]=!0,-1!==gt.indexOf(t)&&(this.options.timerEnabled=!0,-1!==pt.indexOf(t)&&(this.options.updateByTimer=!0)),t===tt.TimeIdle?this.options.runActivity=!0:t===tt.ScrollPercent?this.options.runScroll=!0:t===tt.ExitAttempted&&(this.options.runBounce=!0))}))}update(t=!1){const e=this.currentValue;(t||this.options.updateByTimer||!this.prevValue||Object.keys(this.enabledKeys).some((t=>this.prevValue[t]!==e[t])))&&(this.prevValue=e,this.trigger("change",e))}reset(t){this.prevValue={},this.visit=t,this.watches=Object.assign(Object.assign({},vt),{scrollPercent:this.watches.scrollPercent})}readValue(){const t=this.currentValue;return this.watches.exitAttempted&&(this.prevValue[tt.ExitAttempted]=this.watches.exitAttempted=!1),t}get currentValue(){const t=Date.now(),e={};return Object.keys(this.enabledKeys).forEach((n=>{n===tt.ExitAttempted?e[n]=this.watches.exitAttempted:n===tt.ScrollPercent?e[n]=this.watches.scrollPercent:n===tt.TimeIdle?e[n]=t-this.watches.lastActivity.getTime():n===tt.TimeOnPage?e[n]=t-this.visit.time:n===tt.TimeOnSite&&(e[n]=t-this.visit.sessionStartTime)})),e}addAjaxWatcher(t,e,n=!1){const r=`${t.method}: ${t.url}`;-1===this.ajaxWatchers.indexOf(r)&&(function(t,e){ht||(window.XMLHttpRequest.prototype.open=ct,window.fetch=ut,ht=!0),(dt||(dt=new rt),dt).on("request",((n,r)=>{(function(t,e){return!(e.method&&t.method&&e.method.toLowerCase()!==t.method.toLowerCase()||e.url&&t.url&&!t.url.match(e.url))})(r,e)&&t&&setTimeout((()=>t(r)),0)}))}((t=>{e&&e(t),this.update(n)}),t),this.ajaxWatchers.push(r))}}function _t(t){return Object(nt.e)(Object(nt.a)(t.map((({targeting:t})=>{if(t&&t.group)return Object(nt.a)(wt(t.group.items))}))).filter(Boolean))}function wt(t){return Object(nt.a)(t.map((t=>Y(t)?wt(t.items):t.type)))}class yt extends rt{constructor(t){super(),this.runtime=t,this.widgets={},this.watchers=null,this.targetingKeys=null,this.reset()}async getEnvironmentForRuntime(t){const e=await this.runtime.session.getServerData(),n=this.runtime.session.currentVisit,r=n.utm;return{ab:100*Math.random(),location:n.location,source:n.source,referrer:n.referrer,pageNumber:n.pageNumber,sessionNumber:n.sessionNumber,isReturning:n.sessionNumber>1,utm:{term:r.utm_term,source:r.utm_source,content:r.utm_content,campaign:r.utm_campaign,medium:r.utm_medium},geo:e.geo.geopath,platform:e.ua.platform,os:e.ua.os,browser:e.ua.browser,language:n.language,displayWidth:n.displayWidth,displayHeight:n.displayHeight,api:this.runtime.args.getParams(),ip:e.geo.ip,cookie:h,cssSelector:it,atonce:!0,exitAttempted:void 0,scrollPercent:void 0,timeOnPage:void 0,timeOnSite:void 0,timeIdle:void 0,date:t.getTime(),time:t.getTime(),weekday:t.getDay()}}initialize(t){this.targetingKeys=_t(t),t.forEach((t=>{this.widgets[t.id]=new kt(t)})),this.watchers=new bt(this.runtime.session.currentVisit,this.targetingKeys),this.watchers.on("change",((t,e)=>{this.triggerChange()}))}async getState(t){let e=Object.assign(Object.assign({},await this.getEnvironmentForRuntime(t)),this.watchers.readValue());if(this.runtime.platform){const t=Object(nt.b)(this.targetingKeys,this.runtime.platform.getEnvironmentKeys());t.length&&(e=Object.assign(Object.assign({},e),await this.runtime.platform.getEnvironment(t)))}return new xt(t,e,this.widgets,this.runtime.storages)}reset(){Object.values(this.widgets).forEach((t=>t.reset())),this.watchers&&this.watchers.reset(this.runtime.session.currentVisit)}triggerChange(){this.trigger("change")}}class xt{constructor(t,e,n,r){this.now=t,this.env=e,this.widgets=n,this.storages=r}getEnvironmentForWidget(t,e){const n=this.storages.loadAllFor(t)||{},i=t=>n[t]||{time:0,value:0},o=t=>{const n=t.reduce(((t,e)=>Math.max(t,i(e).time)),0);return 0!=n?e.getTime()-n:void 0},s=t=>t.reduce(((t,e)=>t+i(e).value),0);return{timeSinceLastAction:o(p),actionCount:s(p),timeSinceLastClose:o([r.Close]),closeCount:s([r.Close]),timeSinceLastHide:o([r.Hide]),hideCount:s([r.Hide]),timeSinceLastShow:o([r.Show]),showCount:s([r.Show])}}test(t,e){const n=this.widgets[t];if(!n)return!1;const r=Object.assign(Object.assign({},this.env),this.getEnvironmentForWidget(t,this.now));if(e){r[tt.TimeDisplay]=this.now.getTime()-e.getTime();const t=r[tt.TimeSinceLastAction];r[tt.TimeDisplay]>t&&(r[tt.TimeSinceAction]=t)}return n.test(r,null!=e)}}class kt{constructor(t){this.widget=t,this.generalResult=!1,this.startResult=[],this.hideResult=[],this.data=(t.targeting||{}).data,this.reset()}test(t,e){const n=Z(this.generalTargeting())(t)[0];let r,i=n;e||(i=i&&Z(this.stopTargeting())(t)[0]);const[o,s]=e?[this.hideTriggers(),this.hideResult]:[this.startTriggers(),this.startResult];return o.forEach(((i,o)=>{let a=!1;i.type===tt.Auto&&!0===i.value?a=this.generalResult==e&&n==!e:[a]=Z(this.makeTargeting([i]))(t),r||!a||s[o]||(r=i.type),"="===i.operation&&!0===i.value||(s[o]=a)})),i=r?i&&!e:e,this.generalResult=n,i}reset(){this.startResult=Array.of(this.startTriggers().length).map((()=>!1)),this.hideResult=Array.of(this.hideTriggers().length).map((()=>!1))}group(t){return(((this.widget.targeting||{}).group||{}).items||[]).find((e=>e.id===t))||{id:t,items:[],operation:"or"}}makeTargeting(t){return{group:{items:t,operation:"and"},data:this.data}}generalTargeting(){const t=[et.Location,et.General,et.Schedule];return this.makeTargeting(t.map((t=>this.group(t))))}stopTargeting(){return this.makeTargeting([this.group(et.Stop)])}startTriggers(){return this.group(et.Start).items}hideTriggers(){return this.group(et.Hide).items}}class Ot{constructor(t){this.runtime=t,this._created={}}async initialize(t){this.runtime.renderer.isRendered()||this.runtime.renderer.render(this.runtime.args.getParams()),t&&(this.widgets||(this.widgets=t.sort(((t,e)=>(e.sort_order||0)-(t.sort_order||0))),this.widgets.length&&(this.targeting||(this.targeting=new yt(this.runtime),this.targeting.initialize(this.widgets),this.targeting.on("change",(async()=>{await this.update()}))),this.runtime.platform&&await this.runtime.platform.initialize(this.widgets,this.targeting))))}async update(t){if(await this.initialize(t),!this.widgets)throw new Error("not initialized");0!==this.widgets.length&&(await this.updateContext(),await this.displayWidgets())}async displayWidgets(){const t=function(t,e){let n;const r=e.storages.load("ab")||{},i=[],o={};for(n of t)if(n.groupId){let t=o[n.groupId];t?t.push(n):t=[n],o[n.groupId]=t}else i.push(n);for(const s of Object.keys(o||{})){let t;const e=o[s];if(e){if(r[s]){for(let i=0;i<e.length;i++)if(n=e[i],n.id===r[s]){t=i;break}}else t=r[s]||Math.floor(Math.random()*e.length);const o=e.splice(t,1)[0];r[s]=o.id,i.push(o)}}return e.storages.save("ab",r),i}(this.widgets,this.runtime).map((t=>t.id)),e=e=>!1!==this.getWidgetUserDisplayAction(e)&&-1!==t.indexOf(e)&&void 0,n=await this.targeting.getState(new Date);this.widgets.forEach((t=>{const r=this.displayAt(t.id);let i=e(t.id);null==i&&(i=n.test(t.id,r)),!r&&i?this._createWidget(t):r&&!i&&this._hideWidget(t)}))}findWidget(t){return this.widgets.find((e=>e.id===t))}async showWidgetUser(t){await this.initialize();const e=this.findWidget(t);return!!e&&(await this._createWidget(e)&&this.widgetShownByUser(t),!0)}async closeWidgetUser(t){await this.initialize();const e=this.findWidget(t);return!!e&&(await this._destroyWidget(e)&&(this.runtime.track.add(new f(r.Close,e)),this.widgetClosedByUser(t)),!0)}async hideWidget(t){await this.initialize();const e=this.findWidget(t);return!!e&&await this._hideWidget(e)}async updateWidgetTags(t){await this.initialize(),this.runtime.renderer.updateContext(t)}async _destroyWidget(t){const e=this._created[t.id];return!(!e||!e.shown||(e.close(),delete this._created[t.id],0))}async _hideWidget(t){return await this._destroyWidget(t)&&this.runtime.track.add(new f(r.Hide,t)),!0}async _createWidget(t){return!this._created[t.id]&&(this._created[t.id]={shown:!1},this._created[t.id]=await this.runtime.renderer.createWidget(t),this._created[t.id].shown?(this.runtime.track.add(new f(r.Show,t)),!0):(delete this._created[t.id],!1))}widgetClosedByUser(t){this.runtime.storages.static.set("byUser."+t,!1)}widgetShownByUser(t){this.runtime.storages.static.set("byUser."+t,!0)}getWidgetUserDisplayAction(t){return this.runtime.storages.static.get("byUser."+t)}async pageView(){this.targeting&&this.targeting.reset(),this.updateContext()}displayAt(t){return(this._created[t]||{}).date}async updateContext(){await this.initialize();const t=new Date,e=await this.runtime.session.getServerData(),n=navigator.language,r=this.runtime.session.currentVisit,{href:i,search:o,pathname:s,hash:a}=this.runtime.location(),c=b(o),l=Object.assign({$date:t.toLocaleDateString(n),$month:t.toLocaleString(n,{month:"long"}),$weekday:t.toLocaleString(n,{weekday:"long"}),$day:t.toLocaleString(n,{day:"numeric"}),$country:e.geo.country,$countryCode:e.geo.country_code,$region:e.geo.region,$state:e.geo.region,$stateCode:e.geo.state_code,$city:e.geo.city,$postalCode:e.geo.postal_code,$browser:e.ua.browser,$device:e.ua.device,$os:e.ua.os,$deviceType:e.ua.platform,$location:i,$locationPathname:s,$locationFullpath:s+o+a},r?{$language:r.language,$utmMedium:r.utm.utm_medium,$utmSource:r.utm.utm_source,$utmCampaign:r.utm.utm_campaign,$utmContent:r.utm.utm_content,$utmTerm:r.utm.utm_term}:{});for(const u in c)l["$"+u]=c[u];if(l.$country_code=l.$countryCode,l.$state_code=l.$stateCode,l.$postal_code=l.$postalCode,l.$device_type=l.$deviceType,l.$utm_medium=l.$utmMedium,l.$utm_source=l.$utmSource,l.$utm_campaign=l.$utmCampaign,l.$utm_content=l.$utmContent,l.$utm_term=l.$utmTerm,l.$location_pathname=l.$locationPathname,l.$location_fullpath=l.$locationFullpath,this.runtime.platform){const t=await this.runtime.platform.getTags();for(const e in t)l["$"+e]=t[e]}this.runtime.settings.currencyFormat&&(l.$CURRENCY_FORMAT=this.runtime.settings.currencyFormat),this.runtime.renderer.updateContext(l)}}class St{constructor(t){this.storages=t}isInitialized(){return!!this.sessionId}loadOrCreate(t,e){const n=this.storages.loadSession("lastVisit"),r=(new Date).getTime();n&&n<r-60*e*1e3&&this.storages.cleanupSession();const i={newUser:!1,newSession:!1};return this.userId=this.storages.load("uid"),this.userId&&36==this.userId.length&&(this.userId=null),i.newUser=!this.userId,i.newUser&&this.storages.cleanupSession(),this.sessionId=this.storages.loadSession("id"),i.newSession=!this.sessionId,i.newSession?(this.sessionStartTime=new Date,this.storages.newSession(this.sessionId,this.sessionStartTime),this.storages.saveSession("source",window.document.referrer),this.storages.saveSession("landing",t().href),this.storages.save("sessionsCount",(this.storages.load("sessionsCount")||0)+1)):this.sessionStartTime=new Date(this.storages.session.get("$start")),i}updateServerData(t){if(!this._serverData){const e=this.storages.loadSession("server");this._serverData=e?Promise.resolve(e):this.fetchServerData(t)}}fetchServerData(t){let e=this.source,n="";const r=this.landing;let i={};if(e){const t=new URL(window.document.location.href);let n;try{n=new URL(e)}catch(s){e=""}n&&n.hostname!=t.hostname&&(i.medium="referrer",i.source=n.hostname)}if(r)try{n=new URL(r).search.replace("?","")}catch(a){}const o=new URL(t);return this.userId&&o.searchParams.append("uid",this.userId),this.sessionId&&o.searchParams.append("sid",this.sessionId),e&&o.searchParams.append("source",e),n&&o.searchParams.append("query",n),fetch(o.href).then((t=>{if(!t.ok)throw new Error(t.statusText);return t.json()})).then((t=>(t.timedelta=t.time-(new Date).getTime(),this.storages.saveSession("server",t),t.utm&&Object.keys(t.utm).length&&(i=Object.assign({},t.utm)),this.refreshUtmServer(i),t.id&&this.updateId(t.user_id,t.id),t))).catch((()=>null))}async getServerData(){return this._serverData&&await this._serverData||{timedelta:0,token:"-",geo:{},ua:{},utm:{}}}pageView(t){const e=(new Date).getTime(),n=this.refreshUtm(t),r=this.pageNum+1;this.storages.saveSession("pageNum",r),this._visit={userId:this.userId,sessionId:this.sessionId,sessionStartTime:this.sessionStartTime.getTime(),time:e,location:t().href,referrer:window.document.referrer,pageNumber:r,sessionNumber:this.storages.load("sessionsCount")||1,lastVisit:this.storages.loadSession("lastVisit"),source:this.storages.loadSession("source"),utm:n,language:navigator.language.split("-")[0],displayWidth:window.screen.width,displayHeight:window.screen.height},this.storages.saveSession("lastVisit",this._visit.time)}refreshUtm(t){const e=this.storages.load("utm")||{},n=function(t){const e=b(t().search),n=b(t().hash.substring(1)),r={};return jt.forEach((t=>{const i=e[t]||n[t];i&&(r[t]=i)})),r}(t);let r={},i=!1;return n&&Object.keys(n).length&&(r=Object.assign(Object.assign({},n),{method:"url"}),i=!0),!Object.keys(r).length||!i&&Object.keys(e).length?Object.keys(e).length&&(r=Object.assign({method:"url"},e)):this.storages.save("utm",r),r}refreshUtmServer(t){const e={};t.medium&&(e.utm_medium=t.medium),t.source&&(e.utm_source=t.source);const n=this.storages.load("utm");Object.keys(e).length&&(n&&Object.keys(n).length||(e.method="referrer",this.storages.save("utm",e),this._visit&&(this._visit.utm=e)))}updateId(t,e){this.userId!=t&&(this.userId=t,this.storages.save("uid",this.userId)),this.sessionId=e,this.storages.saveSession("id",e),this._visit.userId=t,this._visit.sessionId=e}get pageNum(){return this.storages.loadSession("pageNum")||0}get source(){return this.storages.loadSession("source")}get landing(){return this.storages.loadSession("landing")}get currentVisit(){return this._visit}}const jt=["utm_source","utm_medium","utm_term","utm_content","utm_campaign"],Ct=[tt.ProductId,tt.ProductType,tt.ProductVendor,tt.ProductTag,tt.VariantId,tt.VariantPrice,tt.VariantAvailable,tt.VariantOptions,tt.CartTotalPrice,tt.CartDiscount,tt.CartItemCount,tt.CartProduct,tt.CartProductType,tt.CartVariant,tt.AddToCart,tt.RemoveFromCart,tt.CustomerId,tt.CustomerTag,tt.CustomerOrderCount,tt.CustomerTotalSpent,tt.CustomerAcceptsMarketing],Et=[tt.CartTotalPrice,tt.CartDiscount,tt.CartItemCount,tt.CartProduct,tt.CartProductType,tt.CartVariant,tt.AddToCart,tt.RemoveFromCart],Tt=[tt.ProductTag,tt.VariantOptions,tt.VariantAvailable],Pt=[tt.CustomerTag,tt.CustomerOrderCount,tt.CustomerTotalSpent,tt.CustomerAcceptsMarketing];function It(t){return t.total_price/=100,t.items_subtotal_price/=100,t.total_discount/=100,t}class At extends rt{constructor(){super(...arguments),this.name="shopify",this.cartEvents=new rt,this.ordersCache={},this.productsCache={},this.cartTagsExists=!1,this.customerTagsExists=!1,this.orderTagsExists=!1,this.productTagsExists=!1,this.cartEnv={},this.createCartPromise=async()=>{const t=await fetch("/cart.js");if(t.ok)return It(await t.json());throw new Error("Failed to load cart")}}static detect(t){return t.Shopify||t.ShopifyAnalytics}async initialize(t,e){for(let r=0;r<t.length;r++)for(let e=0;e<t[r].pages.length;e++){const n=JSON.stringify(t[r].pages[e].data);n.match(/\$cart/)&&(this.cartTagsExists=!0),n.match(/\$customer/)&&(this.customerTagsExists=!0),n.match(/\$order/)&&(this.orderTagsExists=!0),(n.match(/\$product/)||n.match(/\$variant/))&&(this.productTagsExists=!0)}const n=[];if(this.cartTagsExists&&n.push(this.getCart()),this.customerTagsExists&&n.push(this.getCustomer()),this.orderTagsExists){const t=this.getOrderId();t&&n.push(this.getOrder(t))}return this.productTagsExists&&n.push(this.getProduct()),n.length&&await Promise.all(n),this.cartEvents.on("init",((t,{newCart:n})=>{e.triggerChange()})),this.cartEvents.on("change",((t,{newCart:n,prevCart:r})=>{const i=n.item_count-r.item_count;i<0?this.cartEnv[tt.RemoveFromCart]=!0:i>0&&(this.cartEnv[tt.AddToCart]=!0),e.triggerChange()})),e.watchers.addAjaxWatcher({method:"post",url:"/cart/add(\\.js)?"},(()=>this.refreshCart())),e.watchers.addAjaxWatcher({method:"post",url:"/cart/change(\\.js)?"},(t=>{t.response?t.response.then((t=>{200===t.status&&this.refreshCart(It(JSON.parse(t.body)))})):this.refreshCart()})),e.watchers.addAjaxWatcher({method:"get",url:"/cart.js"},(t=>{t.response&&t.response.then((t=>{200===t.status&&this.refreshCart(It(JSON.parse(t.body)))}))})),this.testOrderGoal(),!0}getEnvironmentKeys(){return Ct}async getEnvironment(t){const e=this.getCustomerId();let n={};e&&(n[tt.CustomerId]=e.toString());const r=t.some((t=>-1!==Tt.indexOf(t))),i=await this.getProduct(r);if(i&&(n=Object.assign(Object.assign({},n),{[tt.ProductId]:i.id.toString(),[tt.ProductType]:i.type,[tt.ProductVendor]:i.vendor,[tt.ProductTag]:i.tags}),i.variant&&(n=Object.assign(Object.assign({},n),{[tt.VariantId]:i.variant.id.toString(),[tt.VariantPrice]:i.variant.price,[tt.VariantAvailable]:i.variant.available,[tt.VariantOptions]:i.variant.options}))),t.some((t=>-1!==Et.indexOf(t)))){const t=await this.getCart(),e=t.items||[];n=Object.assign(Object.assign(Object.assign({},n),{[tt.CartTotalPrice]:t.total_price,[tt.CartDiscount]:t.total_discount,[tt.CartItemCount]:t.item_count,[tt.CartProduct]:e.map((t=>t.product_id.toString())),[tt.CartProductType]:[...new Set(e.map((t=>t.product_type)).filter((t=>t)))],[tt.CartVariant]:e.map((t=>t.variant_id.toString()))}),this.cartEnv)}if(this.cartEnv={},t.some((t=>-1!==Pt.indexOf(t)))){const t=await this.getCustomer();t&&(n=Object.assign(Object.assign({},n),{[tt.CustomerId]:t.id.toString(),[tt.CustomerTag]:t.tags,[tt.CustomerTotalSpent]:t.total_spent,[tt.CustomerOrderCount]:t.orders_count,[tt.CustomerAcceptsMarketing]:t.accepts_marketing}))}return n}async getTrackingContext(){const t=this.getCustomerId(),e=this.getOrderId(),n=await this.getProduct(!1),r={};return t&&(r.customerId=t),e&&(r.orderId=e),n&&(r.productId=n.id,n.variant&&(r.variantId=n.variant.id)),r}async getTags(){let t={};if(this.cartTagsExists){const e=await this.getCart();t=Object.assign(Object.assign({},t),{cartItemCount:e.item_count,cartTotalPrice:e.total_price,cartDiscount:e.total_discount,cartSubtotalPrice:e.items_subtotal_price})}if(this.customerTagsExists){const e=await this.getCustomer();e&&(t=Object.assign(Object.assign({},t),{customerId:e.id,customerEmail:e.email,customerPhone:e.phone,customerName:e.name}))}if(this.orderTagsExists){const e=this.getOrderId();if(e){const n=await this.getOrder(e);n&&(t=Object.assign(Object.assign({},t),{orderId:n.id,orderName:n.name,orderTotalPrice:n.total_price,orderSubtotalPrice:n.subtotal_price}))}}if(this.productTagsExists){const e=await this.getProduct(!0);if(e&&(t=Object.assign(Object.assign({},t),{productId:e.id,productVendor:e.vendor,productType:e.type,productTitle:e.title}),e.variant)){t=Object.assign(Object.assign({},t),{variantId:e.variant.id,variantPrice:e.variant.price,variantTitle:e.variant.title,variantSku:e.variant.sku,variantBarcode:e.variant.barcode});for(const n in e.variant.options)t["variantOption"+n]=e.variant.options[n]}}return t}pageView(){this.cartEnv={},this.testOrderGoal()}async getCurrentItem(){const t=await this.getProduct(!1);if(t&&t.variant)return{id:t.variant.id,quantity:1,label:t.variant.display_name}}async runAddToCart(t,e){const n={items:t.filter((t=>t.id)).map((t=>({id:t.id,quantity:t.quantity})))};if(n.items.length<0)return!1;const r=await fetch("/cart/add.js",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});return r.ok&&e&&window.open(e,"_self"),r.ok}async runApplyCoupon(t,e){return e?(window.open(`/discount/${encodeURI(t)}?redirect=${e?encodeURIComponent(e):""}`,"_self"),!0):window.fetch("/discount/"+encodeURI(t),{redirect:"manual"}).then((()=>!0))}async refreshCart(t=null){let e=null;if(this.cart)try{e=await this.cart}catch(o){this.cart=null}this.cart=t?Promise.resolve(t):this.createCartPromise();const n=await this.cart;var r,i;e?(r=e,i=n,JSON.stringify(r)!==JSON.stringify(i)&&this.cartEvents.trigger("change",{newCart:n,prevCart:e})):this.cartEvents.trigger("init",{newCart:n})}async getCart(){return this.cart||(this.cart=this.createCartPromise()),this.cart}async createCustomerPromise(t){const e=await fetch("/apps/getsitecontrol?view=customer&id="+t);if(e.ok)return await e.json()}getShopifyCheckout(){const t=window;if(t.Shopify&&t.Shopify.checkout)return t.Shopify.checkout}getCustomerId(){const t=this.getShopifyCheckout();return t?t.customer_id:this.getMetaPage().customerId}getCustomer(){if(!this.customer){const t=this.getCustomerId();this.customer=t?this.createCustomerPromise(t):Promise.resolve()}return this.customer}getOrderId(){const t=this.getShopifyCheckout();if(t)return t.order_id}async getOrder(t){return this.ordersCache[t]||(this.ordersCache[t]=fetch("/apps/getsitecontrol?view=order&id="+t).then((t=>t.ok?t.json().then((t=>t)):null))),await this.ordersCache[t]}testOrderGoal(){if(!window.document.location.pathname.match(/^\/\w+\/checkouts\/\w+\/thank_you$/))return;const t=this.getOrderId();t&&this.getOrder(t).then((t=>{if(t){const e={name:t.name,customer_id:t.customer_id,email:t.email,phone:t.phone,subtotal_price:t.subtotal_price,total_price:t.total_price,currency:t.currency,total_tax:t.total_tax};this.trigger("goal",new g("order",t.total_price,t.id.toString(),e))}}))}getMetaPage(){const t=window;let e={pageType:null};if(t.ShopifyAnalytics){const n=t.ShopifyAnalytics.meta;n&&n.page&&(e=Object.assign({},n.page))}return e.pageType||("/cart"===window.document.location.pathname?e.pageType="cart":"/account"===window.document.location.pathname&&(e.pageType="account")),e}getMeta(){const t=window,e={page:this.getMetaPage()};if(t.ShopifyAnalytics){const n=t.ShopifyAnalytics.meta;n&&(e.currency=n.currency,e.selectedVariantId=n.selectedVariantId,n.product&&(e.product={id:n.product.id,vendor:n.product.vendor,type:n.product.type,title:n.product.variants[0].name.split(" - ").slice(0,-1).join(" - ").trim(),variants:n.product.variants.map((t=>({id:t.id,title:t.public_title,sku:t.sku,price:t.price/100})))}))}return e}async getProduct(t=!1){const e=this.getMeta();let n=e.product,r=null;const i=window.document.getElementById("ProductJson-product-template");if(i&&(r=JSON.parse(i.innerHTML)),!r&&(t||!n)){const t=window.document.location.pathname.match(/\/products\/([^/]+)$/);if(t){const e=t[1];this.productsCache[e]||(this.productsCache[e]=fetch(`/products/${e}.js`).then((async t=>t.ok?await t.json():null))),r=await this.productsCache[e]}}r&&(n={id:r.id,type:r.type,vendor:r.vendor,variants:[],title:r.title,tags:r.tags,options:r.options},r.variants.forEach((t=>{n.variants.push({id:t.id,title:t.public_title,display_name:t.name,price:t.price/100,sku:t.sku,options:n.options.reduce(((e,n,r)=>Object.assign(Object.assign({},e),{[n]:t.options[r]})),{}),barcode:t.barcode,weight:t.weight,available:t.available,taxable:t.taxable,requires_shipping:t.requires_shipping})})));let o=e.selectedVariantId;if(o||(o=b(window.document.location.search).variant),n&&n.variants)if(o){for(let s=0;s<n.variants.length;s++)if(n.variants[s].id.toString()==o.toString()){n.variant=n.variants[s];break}}else n.variant=n.variants[0];return n}}const Nt="getsitecontrol";function $t(t){t.match(/^\d+$/)&&(t="id="+t);const e=b(t),{id:n}=e,r=Object(i.a)(e,["id"]),o=parseInt(n,10);return Object.assign(Object.assign({},isNaN(o)?{}:{id:o}),r)}function Dt(t){const e=t.match(new RegExp(`^#${Nt}\\?(.+)`,"i"));return e?$t(e[1]):{}}function Lt(t){return Object.keys(t||{}).length>0}class Rt{constructor(){this._eventListeners=[]}addEventListener(t){return this._eventListeners.push(t),this._cleanup||(this._cleanup=function(t){const e=(t,n=1)=>{if(n>3)return;const r=function(t){return t?[["href",Dt],["data-"+Nt,$t]].reduce(((e,[n,r])=>{const i=t.getAttribute(n);return Object.assign(Object.assign({},e),i&&r(i))}),{}):null}(t);return Lt(r)?r:t.parentElement&&e(t.parentElement,n+1)},n=n=>{const r=n.target;if(!(r instanceof Element))return;const i=e(r);Lt(i)&&(t(i),i.id&&n.preventDefault())};return document.addEventListener("click",n,!1),()=>{document.removeEventListener("click",n)}}((t=>this._dispatchEvent(t)))),()=>{this._eventListeners=this._eventListeners.filter((e=>e!==t)),0===this._eventListeners.length&&this._cleanup&&(this._cleanup(),this._cleanup=null)}}processHref(t){const e=t&&Dt(t);Lt(e)&&this._dispatchEvent(e)}_dispatchEvent(t){this._eventListeners.forEach((e=>e(t)))}}var Wt=n("0iFO");class Mt{constructor(t){this.type=t,this.value=null}isHandlers(){return"callback"==this.type}isData(){return"params"==this.type||"settings"==this.type}isMethod(){return"show"==this.type||"close"==this.type||"hide"==this.type||"trackPage"==this.type}static parse(t){if(Array.isArray(t)){if((t=this.transformOnEvent(t)).length<2)throw new Error("invalid arg array length");const e=new Mt(t[0]);if(e.isData())if("object"==typeof t[1])e.value=Object.assign({},t[1]);else{if(!(t.length>=3))throw new Error("invalid arg array");e.value={[t[1]]:t[2]}}else if(e.isHandlers()){if(t.length<3)throw new Error("invalid handler arg");if("string"!=typeof t[1])throw new Error("arg handler type invalid");if("function"!=typeof t[2])throw new Error("arg not a function");e.value=t[1],e.callback=t[2]}else if(e.isMethod())e.value=t[1];else{if("goal"!=e.type)throw new Error("unknown arg type "+e.type);e.value=new g(t[1],t[2],t[3],t[4])}return e}throw new Error("unknown arg format")}static transformOnEvent(t){if(2===t.length&&"string"==typeof t[0])for(const e in r)if(t[0]==="on"+Object(Wt.a)(r[e]))return["callback",r[e],t[1]];return t}}class Ut{constructor(){this.settings={},this.params={},this.callbacks={}}addNew(t){const e=Mt.parse(t);if(e.isData())Object.assign(this.getCollection(e.type),e.value);else if(e.isHandlers()){const t=this.getCollection(e.type),n=t[e.value]=t[e.value]||[];-1==n.indexOf(e.callback)&&n.push(e.callback)}return e}getCollection(t){if("settings"==t)return this.settings;if("params"==t)return this.params;if("callback"==t)return this.callbacks;throw new Error("unknown type")}getParams(t){const e={};for(const n in this.params||{})(void 0===t||!0===t&&!n.startsWith("_")||!1===t&&n.startsWith("_"))&&(e[n]=this.params[n]);return e}runCallbacks(t,...e){(this.callbacks[t]||[]).forEach((t=>t(...e)))}}const Ft=n("MN/D"),Vt=[r.Show,r.Close,r.SubmitWidget,r.OpenUrl,r.ShowWidget];class zt{constructor(t,e=Vt){if(this.enabledEvents=e,"boolean"==typeof t)this.enabled=t;else if(null!=t)throw new Error(`"${typeof t}" config not implemented`);this.track=this.track.bind(this)}isEnabled(){return!1!==this.enabled}isEnabledDefault(){return!0===this.enabled}isEventEnabled({type:t,widget:e}){return-1!==this.enabledEvents.indexOf(t)&&this.isWidgetEnabled(e)}isWidgetEnabled(t){return this.isEnabledDefault()}getQueue(){throw new Error("not implemented")}async finalize(t){}async track(t,e){if(0===(t=t.filter((t=>this.isEventEnabled(t)))).length)return;const n=this.getQueue();n&&t.forEach(((t,e)=>n(t))),await this.finalize(e)}}class Ht extends zt{constructor(t,e,n){super(!!e,n),this.session=t,this.eventsUrl=e,this.events=[]}getQueue(){return t=>{const e={data:t.getData(),type:t.type};t.widget&&(e.widgetId=t.widget.id),this.events.push(e)}}async finalize(t){if(0==this.events.length)return;const e=Object.assign(Object.assign({},t),{events:this.events.slice()});this.events.length=0;const n=JSON.stringify(e);let r=!1;const i=await this.session.getServerData(),o=t.date+i.timedelta,s=`${o}:${t.sessionId}`,a=Ft(n,s),c=this.eventsUrl+`?ts=${o}&sid=${t.sessionId}&t=${i.token||""}&s=${a}`;"function"==typeof window.navigator.sendBeacon&&(r=window.navigator.sendBeacon(c,n)),r||await fetch(c,{method:"POST",body:n})}}class Bt extends zt{constructor(t){super(t),this.category="getsitecontrol"}isWidgetEnabled(t){const e=(t.settings||{}).trackGA;return!1!==e&&this.isEnabled()&&(this.isEnabledDefault()||!!e)}getQueue(){const t=window.GoogleAnalyticsObject||"ga",e=window[t];if(e&&"function"==typeof e){const t=["send"];if("function"==typeof e.getAll){const n=[];e.getAll().forEach((e=>{-1===n.indexOf(e.get("trackingId"))&&(n.push(e.get("trackingId")),t.push(e.get("name")+".send"))}))}return n=>t.forEach((t=>e(t,this.transform(n))))}{const t=window._gaq;if(t&&"function"==typeof t.push)return e=>{const n=this.transform(e);t.push(["_trackEvent",n.eventCategory,n.eventAction,n.eventLabel,n.eventValue,n.nonInteraction])}}}transform(t){return{hitType:"event",eventCategory:this.category,eventAction:t.type,eventLabel:t.widget?`${t.widget.name} #${t.widget.id}`:void 0,eventValue:void 0,nonInteraction:!t.isAction()}}}class qt extends zt{constructor(t){super(t),this.dataLayerName="dataLayer"}isWidgetEnabled(t){const e=(t.settings||{}).trackGTM;return!1!==e&&this.isEnabled()&&(this.isEnabledDefault()||!!e)}getQueue(){const t=window[this.dataLayerName];if(t&&"function"==typeof t.push)return e=>t.push(this.transform(e))}transform(t){const e={event:"gsc."+t.type,"gsc.eventData":t.prettyData()};return t.widget&&(e["gsc.widgetId"]=t.widget.id),e}}const Gt={sessionLength:20,storage:"local",storagePrefix:"gsc",placement:"website",events:[r.Show,r.SubmitWidget,r.OpenUrl,r.ShowWidget,r.CopyToClipboard,r.AddToCart,r.ApplyCoupon,r.Goal],goals:[],trackLocation:!0,previewInteractive:!1};class Jt{constructor(t,e={}){this.platform=function(t){const e=window;let n;return(void 0===At.name||At.detect(e))&&(n=new At),n}(),this.settings=Object.assign(Object.assign({},Gt),e),this.renderer=t.createWidgetRenderer(this,{previewInteractive:this.settings.previewInteractive}),this.location=function(){let t=window.document.location;const e=window.document.createElement("a");return(()=>{let n=0;const r=()=>t;return r.set=n=>(e.href=n,""===e.host&&(e.href=e.href),t=e,r.stopTrack(),!0),r.track=(e,r=100)=>{if(!n){let i=t.pathname+"?"+t.search;n=window.setInterval((()=>{const n=t.pathname+"?"+t.search;i!==n&&(i=n,e())}),r)}},r.stopTrack=()=>{n&&(clearInterval(n),n=0)},r})()}(),this.storages=new u(this.settings.storage,this.settings.storagePrefix),this.session=new St(this.storages),this.display=new Ot(this),this._args=new Ut,this.platform&&this.platform.on("goal",((t,e)=>{this.trackGoal(e)})),this.launcher=new Rt,this.launcher.addEventListener((async t=>{var{id:e}=t,n=Object(i.a)(t,["id"]);await this.setParams(n),e&&await this.showWidget(e)}))}get args(){return this._args}async updateSettings(t={}){t&&(this.settings=Object.assign(Object.assign({},this.settings),t)),this.initTracking(),this.settings.trackLocation?this.location.track(this.onLocationChange.bind(this)):this.location.stopTrack()}initTracking(){const t=[],e=new Ht(this.session,this.settings.serverUrl,this.settings.events);e.isEnabled()&&t.push(e.track);const n=new Bt(this.settings.trackGA);n.isEnabled()&&t.push(n.track);const r=new qt(this.settings.trackGTM);var i;r.isEnabled()&&t.push(r.track),t.push((i=this,async(t,e)=>{const n=(new Date).getTime();for(const r of t)if(r.widget){const t=i.storages.loadFor(r.widget.id,r.type)||{time:n,value:0};t.time=n,t.value+=1,i.storages.saveFor(r.widget.id,r.type,t)}}),function(t){return(e,n)=>{for(const r of e)t.args.runCallbacks(r.type,r.widget?r.widget.id:void 0,r.prettyData(),n)}}(this)),this.track=new m(this,t)}pageView(){let t={newUser:!1,newSession:!1};this.session.isInitialized()||this.session.loadOrCreate(this.location,this.settings.sessionLength),this.settings.serverUrl&&this.session.updateServerData(this.settings.serverUrl),this.session.pageView(this.location),this.platform&&this.platform.pageView(),this.display.pageView(),this.storages.page.clear(),this.launcher.processHref(this.location().hash),this.track.add(new f(r.PageView))}async run(t){this.updateSettings(),this.pageView(),await this.display.update(t)}async showWidget(t,e){if(void 0!==e){const n=this.display.findWidget(t);this.trackWidgetEvent(r.ShowWidget,e,{id:t,name:null==n?void 0:n.name})}return this.display.showWidgetUser(t)}async closeWidget(t){return this.display.closeWidgetUser(t)}async sendData(t,e){return this.trackWidgetEvent(r.SubmitWidget,t,e,!0),Promise.resolve(!0)}openUrl(t,e,n){return this.trackWidgetEvent(r.OpenUrl,t,{url:e},"_blank"!==n),window.open(e,n),Promise.resolve(!0)}copyToClipboard(t,e){return navigator.clipboard?(this.trackWidgetEvent(r.CopyToClipboard,t,{text:e}),navigator.clipboard.writeText(e).then((()=>!0))):Promise.resolve(!1)}addToCart(t,e,n,i){if(this.platform){const o=e=>{const n={items:e.map((t=>({id:t.id,quantity:t.quantity,name:t.label})))};return this.trackWidgetEvent(r.AddToCart,t,n),this.platform.runAddToCart(e,i).then((()=>!0))};return"current"==e?this.platform.getCurrentItem().then((t=>!!t&&o([t]))):o(n)}return Promise.resolve(!1)}applyCoupon(t,e,n){return this.platform?(this.trackWidgetEvent(r.ApplyCoupon,t,{coupon:e}),this.platform.runApplyCoupon(e,n)):Promise.resolve(!1)}trackWidgetEvent(t,e,n={},r=!1){const i=this.display.findWidget(e);this.track.add(new f(t,i,n),r)}sendPreviewEvent(t){return Promise.resolve(!1)}async apiCall(t){const e=this._args.addNew(t);let n=!1,r=null;return"settings"==e.type?this.updateSettings(e.value):"params"==e.type?(this.display.updateWidgetTags(this.args.getParams()),n=!0):"trackPage"==e.type?(this.location.set(e.value),this.pageView(),n=!0):"goal"==e.type?this.trackGoal(e.value):"show"==e.type?r=await this.showWidget(parseInt(e.value)):"close"==e.type?r=await this.closeWidget(parseInt(e.value)):"hide"==e.type&&(r=await this.display.hideWidget(parseInt(e.value))),n&&await this.display.update(),r}async onLocationChange(){this.pageView(),await this.display.update()}async setParams(t){t&&Object.keys(t).length>0&&(await this.display.updateWidgetTags(t),await this.display.update())}trackGoal(t){const e=this.settings.goals.find((e=>e.sysname==t.sysname));if(!e)return;const n=e.hitIdentity||"session",r=this.storages.goals.get(t.sysname)||[],i=this.session.sessionId;r.some((([e,r])=>t.hitId==e&&(null!=e||"global"==n||"session"==n&&i==r)))||(this.track.send(t.asEvent()),r.push([t.hitId,i,t.value,Date.now()]),this.storages.goals.set(t.sysname,r))}}},O94r:function(t,e,n){var r;!function(){var n={}.hasOwnProperty;function i(){for(var t=[],e=0;e<arguments.length;e++){var r=arguments[e];if(r){var o=typeof r;if("string"===o||"number"===o)t.push(r);else if(Array.isArray(r)&&r.length){var s=i.apply(null,r);s&&t.push(s)}else if("object"===o)for(var a in r)n.call(r,a)&&r[a]&&t.push(a)}}return t.join(" ")}t.exports?(i.default=i,t.exports=i):void 0===(r=function(){return i}.apply(e,[]))||(t.exports=r)}()},SKuX:function(t,e,n){function r(t,e){return Object.keys(t).reduce(((n,r)=>(n[r]=e(t[r]),n)),{})}function i(t){return t}function o(t,e){return t.filter((t=>-1!==e.indexOf(t)))}function s(t){return t.hasOwnProperty("flat")?t.flat(1):[].concat(...t)}function a(t){const e=t.slice();for(let n=e.length-1;n>0;n--){const t=Math.floor(Math.random()*(n+1));[e[n],e[t]]=[e[t],e[n]]}return e}n.d(e,"c",(function(){return r})),n.d(e,"e",(function(){return i})),n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return s})),n.d(e,"d",(function(){return a}))},aYSr:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},dbSD:function(t,e,n){let r;e.a=function(){return r||(r=function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get(){t=!0}});window.addEventListener("test",null,e)}catch(e){}return{events:{passiveSupported:t}}}())}},oqNQ:function(t,e,n){n.r(e);var r,i,o,s,a,c,l={},u=[],d=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function h(t,e){for(var n in e)t[n]=e[n];return t}function p(t){var e=t.parentNode;e&&e.removeChild(t)}function g(t,e,n){var r,i,o,s=arguments,a={};for(o in e)"key"==o?r=e[o]:"ref"==o?i=e[o]:a[o]=e[o];if(arguments.length>3)for(n=[n],o=3;o<arguments.length;o++)n.push(s[o]);if(null!=n&&(a.children=n),"function"==typeof t&&null!=t.defaultProps)for(o in t.defaultProps)void 0===a[o]&&(a[o]=t.defaultProps[o]);return f(t,a,r,i,null)}function f(t,e,n,i,o){var s={type:t,props:e,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==o?++r.__v:o};return null!=r.vnode&&r.vnode(s),s}function m(t){return t.children}function v(t,e){this.props=t,this.context=e}function b(t,e){if(null==e)return t.__?b(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?b(t):null}function _(t){var e,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return _(t)}}function w(t){(!t.__d&&(t.__d=!0)&&o.push(t)&&!y.__r++||a!==r.debounceRendering)&&((a=r.debounceRendering)||s)(y)}function y(){for(var t;y.__r=o.length;)t=o.sort((function(t,e){return t.__v.__b-e.__v.__b})),o=[],t.some((function(t){var e,n,r,i,o,s;t.__d&&(o=(i=(e=t).__v).__e,(s=e.__P)&&(n=[],(r=h({},i)).__v=i.__v+1,P(s,i,r,e.__n,void 0!==s.ownerSVGElement,null!=i.__h?[o]:null,n,null==o?b(i):o,i.__h),I(n,i),i.__e!=o&&_(i)))}))}function x(t,e,n,r,i,o,s,a,c,d){var h,p,g,v,_,w,y,x=r&&r.__k||u,O=x.length;for(n.__k=[],h=0;h<e.length;h++)if(null!=(v=n.__k[h]=null==(v=e[h])||"boolean"==typeof v?null:"string"==typeof v||"number"==typeof v?f(null,v,null,null,v):Array.isArray(v)?f(m,{children:v},null,null,null):v.__b>0?f(v.type,v.props,v.key,null,v.__v):v)){if(v.__=n,v.__b=n.__b+1,null===(g=x[h])||g&&v.key==g.key&&v.type===g.type)x[h]=void 0;else for(p=0;p<O;p++){if((g=x[p])&&v.key==g.key&&v.type===g.type){x[p]=void 0;break}g=null}P(t,v,g=g||l,i,o,s,a,c,d),_=v.__e,(p=v.ref)&&g.ref!=p&&(y||(y=[]),g.ref&&y.push(g.ref,null,v),y.push(p,v.__c||_,v)),null!=_?(null==w&&(w=_),"function"==typeof v.type&&null!=v.__k&&v.__k===g.__k?v.__d=c=k(v,c,t):c=S(t,v,g,x,_,c),d||"option"!==n.type?"function"==typeof n.type&&(n.__d=c):t.value=""):c&&g.__e==c&&c.parentNode!=t&&(c=b(g))}for(n.__e=w,h=O;h--;)null!=x[h]&&("function"==typeof n.type&&null!=x[h].__e&&x[h].__e==n.__d&&(n.__d=b(r,h+1)),N(x[h],x[h]));if(y)for(h=0;h<y.length;h++)A(y[h],y[++h],y[++h])}function k(t,e,n){var r,i;for(r=0;r<t.__k.length;r++)(i=t.__k[r])&&(i.__=t,e="function"==typeof i.type?k(i,e,n):S(n,i,i,t.__k,i.__e,e));return e}function O(t,e){return e=e||[],null==t||"boolean"==typeof t||(Array.isArray(t)?t.some((function(t){O(t,e)})):e.push(t)),e}function S(t,e,n,r,i,o){var s,a,c;if(void 0!==e.__d)s=e.__d,e.__d=void 0;else if(null==n||i!=o||null==i.parentNode)t:if(null==o||o.parentNode!==t)t.appendChild(i),s=null;else{for(a=o,c=0;(a=a.nextSibling)&&c<r.length;c+=2)if(a==i)break t;t.insertBefore(i,o),s=o}return void 0!==s?s:i.nextSibling}function j(t,e,n){"-"===e[0]?t.setProperty(e,n):t[e]=null==n?"":"number"!=typeof n||d.test(e)?n:n+"px"}function C(t,e,n,r,i){var o;t:if("style"===e)if("string"==typeof n)t.style.cssText=n;else{if("string"==typeof r&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||j(t.style,e,"");if(n)for(e in n)r&&n[e]===r[e]||j(t.style,e,n[e])}else if("o"===e[0]&&"n"===e[1])o=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=n,n?r||t.addEventListener(e,o?T:E,o):t.removeEventListener(e,o?T:E,o);else if("dangerouslySetInnerHTML"!==e){if(i)e=e.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if("href"!==e&&"list"!==e&&"form"!==e&&"download"!==e&&e in t)try{t[e]=null==n?"":n;break t}catch(t){}"function"==typeof n||(null!=n&&(!1!==n||"a"===e[0]&&"r"===e[1])?t.setAttribute(e,n):t.removeAttribute(e))}}function E(t){this.l[t.type+!1](r.event?r.event(t):t)}function T(t){this.l[t.type+!0](r.event?r.event(t):t)}function P(t,e,n,i,o,s,a,c,d){var g,f,b,_,w,y,k,O,S,j,E,T=e.type;if(void 0!==e.constructor)return null;null!=n.__h&&(d=n.__h,c=e.__e=n.__e,e.__h=null,s=[c]),(g=r.__b)&&g(e);try{t:if("function"==typeof T){if(O=e.props,S=(g=T.contextType)&&i[g.__c],j=g?S?S.props.value:g.__:i,n.__c?k=(f=e.__c=n.__c).__=f.__E:("prototype"in T&&T.prototype.render?e.__c=f=new T(O,j):(e.__c=f=new v(O,j),f.constructor=T,f.render=$),S&&S.sub(f),f.props=O,f.state||(f.state={}),f.context=j,f.__n=i,b=f.__d=!0,f.__h=[]),null==f.__s&&(f.__s=f.state),null!=T.getDerivedStateFromProps&&(f.__s==f.state&&(f.__s=h({},f.__s)),h(f.__s,T.getDerivedStateFromProps(O,f.__s))),_=f.props,w=f.state,b)null==T.getDerivedStateFromProps&&null!=f.componentWillMount&&f.componentWillMount(),null!=f.componentDidMount&&f.__h.push(f.componentDidMount);else{if(null==T.getDerivedStateFromProps&&O!==_&&null!=f.componentWillReceiveProps&&f.componentWillReceiveProps(O,j),!f.__e&&null!=f.shouldComponentUpdate&&!1===f.shouldComponentUpdate(O,f.__s,j)||e.__v===n.__v){f.props=O,f.state=f.__s,e.__v!==n.__v&&(f.__d=!1),f.__v=e,e.__e=n.__e,e.__k=n.__k,f.__h.length&&a.push(f);break t}null!=f.componentWillUpdate&&f.componentWillUpdate(O,f.__s,j),null!=f.componentDidUpdate&&f.__h.push((function(){f.componentDidUpdate(_,w,y)}))}f.context=j,f.props=O,f.state=f.__s,(g=r.__r)&&g(e),f.__d=!1,f.__v=e,f.__P=t,g=f.render(f.props,f.state,f.context),f.state=f.__s,null!=f.getChildContext&&(i=h(h({},i),f.getChildContext())),b||null==f.getSnapshotBeforeUpdate||(y=f.getSnapshotBeforeUpdate(_,w)),E=null!=g&&g.type===m&&null==g.key?g.props.children:g,x(t,Array.isArray(E)?E:[E],e,n,i,o,s,a,c,d),f.base=e.__e,e.__h=null,f.__h.length&&a.push(f),k&&(f.__E=f.__=null),f.__e=!1}else null==s&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=function(t,e,n,r,i,o,s,a){var c,d,h,g,f=n.props,m=e.props,v=e.type,b=0;if("svg"===v&&(i=!0),null!=o)for(;b<o.length;b++)if((c=o[b])&&(c===t||(v?c.localName==v:3==c.nodeType))){t=c,o[b]=null;break}if(null==t){if(null===v)return document.createTextNode(m);t=i?document.createElementNS("http://www.w3.org/2000/svg",v):document.createElement(v,m.is&&m),o=null,a=!1}if(null===v)f===m||a&&t.data===m||(t.data=m);else{if(o=o&&u.slice.call(t.childNodes),d=(f=n.props||l).dangerouslySetInnerHTML,h=m.dangerouslySetInnerHTML,!a){if(null!=o)for(f={},g=0;g<t.attributes.length;g++)f[t.attributes[g].name]=t.attributes[g].value;(h||d)&&(h&&(d&&h.__html==d.__html||h.__html===t.innerHTML)||(t.innerHTML=h&&h.__html||""))}if(function(t,e,n,r,i){var o;for(o in n)"children"===o||"key"===o||o in e||C(t,o,null,n[o],r);for(o in e)i&&"function"!=typeof e[o]||"children"===o||"key"===o||"value"===o||"checked"===o||n[o]===e[o]||C(t,o,e[o],n[o],r)}(t,m,f,i,a),h)e.__k=[];else if(b=e.props.children,x(t,Array.isArray(b)?b:[b],e,n,r,i&&"foreignObject"!==v,o,s,t.firstChild,a),null!=o)for(b=o.length;b--;)null!=o[b]&&p(o[b]);a||("value"in m&&void 0!==(b=m.value)&&(b!==t.value||"progress"===v&&!b)&&C(t,"value",b,f.value,!1),"checked"in m&&void 0!==(b=m.checked)&&b!==t.checked&&C(t,"checked",b,f.checked,!1))}return t}(n.__e,e,n,i,o,s,a,d);(g=r.diffed)&&g(e)}catch(t){e.__v=null,(d||null!=s)&&(e.__e=c,e.__h=!!d,s[s.indexOf(c)]=null),r.__e(t,e,n)}}function I(t,e){r.__c&&r.__c(e,t),t.some((function(e){try{t=e.__h,e.__h=[],t.some((function(t){t.call(e)}))}catch(t){r.__e(t,e.__v)}}))}function A(t,e,n){try{"function"==typeof t?t(e):t.current=e}catch(t){r.__e(t,n)}}function N(t,e,n){var i,o,s;if(r.unmount&&r.unmount(t),(i=t.ref)&&(i.current&&i.current!==t.__e||A(i,null,e)),n||"function"==typeof t.type||(n=null!=(o=t.__e)),t.__e=t.__d=void 0,null!=(i=t.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(t){r.__e(t,e)}i.base=i.__P=null}if(i=t.__k)for(s=0;s<i.length;s++)i[s]&&N(i[s],e,n);null!=o&&p(o)}function $(t,e,n){return this.constructor(t,n)}function D(t,e,n){var i,o,s;r.__&&r.__(t,e),o=(i="function"==typeof n)?null:n&&n.__k||e.__k,s=[],P(e,t=(!i&&n||e).__k=g(m,null,[t]),o||l,l,void 0!==e.ownerSVGElement,!i&&n?[n]:o?null:e.firstChild?u.slice.call(e.childNodes):null,s,!i&&n?n:o?o.__e:e.firstChild,i),I(s,t)}function L(t,e){var n={__c:e="__cC"+c++,__:t,Consumer:function(t,e){return t.children(e)},Provider:function(t){var n,r;return this.getChildContext||(n=[],(r={})[e]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(t){this.props.value!==t.value&&n.some(w)},this.sub=function(t){n.push(t);var e=t.componentWillUnmount;t.componentWillUnmount=function(){n.splice(n.indexOf(t),1),e&&e.call(t)}}),t.children}};return n.Provider.__=n.Consumer.contextType=n}function R(t,e,n,i,o){var s={};for(var a in e)"ref"!=a&&(s[a]=e[a]);var c,l,u={type:t,props:s,key:n,ref:e&&e.ref,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:++r.__v,__source:i,__self:o};if("function"==typeof t&&(c=t.defaultProps))for(l in c)void 0===s[l]&&(s[l]=c[l]);return r.vnode&&r.vnode(u),u}r={__e:function(t,e){for(var n,r,i;e=e.__;)if((n=e.__c)&&!n.__)try{if((r=n.constructor)&&null!=r.getDerivedStateFromError&&(n.setState(r.getDerivedStateFromError(t)),i=n.__d),null!=n.componentDidCatch&&(n.componentDidCatch(t),i=n.__d),i)return n.__E=n}catch(e){t=e}throw t},__v:0},i=function(t){return null!=t&&void 0===t.constructor},v.prototype.setState=function(t,e){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=h({},this.state),"function"==typeof t&&(t=t(h({},n),this.props)),t&&h(n,t),null!=t&&this.__v&&(e&&this.__h.push(e),w(this))},v.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),w(this))},v.prototype.render=m,o=[],s="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,y.__r=0,c=0;var W=Number.isNaN||function(t){return"number"==typeof t&&t!=t};function M(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!((r=t[n])===(i=e[n])||W(r)&&W(i)))return!1;var r,i;return!0}function U(t,e){void 0===e&&(e=M);var n=null;function r(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(n&&n.lastThis===this&&e(r,n.lastArgs))return n.lastResult;var o=t.apply(this,r);return n={lastResult:o,lastArgs:r,lastThis:this},o}return r.clear=function(){n=null},r}function F(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function z(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?V(Object(n),!0).forEach((function(e){F(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function H(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var B="function"==typeof Symbol&&Symbol.observable||"@@observable",q=function(){return Math.random().toString(36).substring(7).split("").join(".")},G={INIT:"@@redux/INIT"+q(),REPLACE:"@@redux/REPLACE"+q(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+q()}};function J(t){if("object"!=typeof t||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function K(t,e,n){var r;if("function"==typeof e&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(H(0));if("function"==typeof e&&void 0===n&&(n=e,e=void 0),void 0!==n){if("function"!=typeof n)throw new Error(H(1));return n(K)(t,e)}if("function"!=typeof t)throw new Error(H(2));var i=t,o=e,s=[],a=s,c=!1;function l(){a===s&&(a=s.slice())}function u(){if(c)throw new Error(H(3));return o}function d(t){if("function"!=typeof t)throw new Error(H(4));if(c)throw new Error(H(5));var e=!0;return l(),a.push(t),function(){if(e){if(c)throw new Error(H(6));e=!1,l();var n=a.indexOf(t);a.splice(n,1),s=null}}}function h(t){if(!J(t))throw new Error(H(7));if(void 0===t.type)throw new Error(H(8));if(c)throw new Error(H(9));try{c=!0,o=i(o,t)}finally{c=!1}for(var e=s=a,n=0;n<e.length;n++)(0,e[n])();return t}function p(t){if("function"!=typeof t)throw new Error(H(10));i=t,h({type:G.REPLACE})}function g(){var t,e=d;return(t={subscribe:function(t){if("object"!=typeof t||null===t)throw new Error(H(11));function n(){t.next&&t.next(u())}return n(),{unsubscribe:e(n)}}})[B]=function(){return this},t}return h({type:G.INIT}),(r={dispatch:h,subscribe:d,getState:u,replaceReducer:p})[B]=g,r}function Y(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce((function(t,e){return function(){return t(e.apply(void 0,arguments))}}))}function X(t){return function(e){var n=e.dispatch,r=e.getState;return function(e){return function(i){return"function"==typeof i?i(n,r,t):e(i)}}}}var Q=X();Q.withExtraArgument=X;var Z,tt,et,nt=Q,rt=0,it=[],ot=r.__b,st=r.__r,at=r.diffed,ct=r.__c,lt=r.unmount;function ut(t,e){r.__h&&r.__h(tt,t,rt||e),rt=0;var n=tt.__H||(tt.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function dt(t){return rt=1,function(t,e,n){var r=ut(Z++,2);return r.t=t,r.__c||(r.__=[n?n(e):xt(void 0,e),function(t){var e=r.t(r.__[0],t);r.__[0]!==e&&(r.__=[e,r.__[1]],r.__c.setState({}))}],r.__c=tt),r.__}(xt,t)}function ht(t,e){var n=ut(Z++,3);!r.__s&&yt(n.__H,e)&&(n.__=t,n.__H=e,tt.__H.__h.push(n))}function pt(t){return rt=5,gt((function(){return{current:t}}),[])}function gt(t,e){var n=ut(Z++,7);return yt(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function ft(t,e){return rt=8,gt((function(){return t}),e)}function mt(t){var e=tt.context[t.__c],n=ut(Z++,9);return n.__c=t,e?(null==n.__&&(n.__=!0,e.sub(tt)),e.props.value):t.__}function vt(){it.forEach((function(t){if(t.__P)try{t.__H.__h.forEach(_t),t.__H.__h.forEach(wt),t.__H.__h=[]}catch(e){t.__H.__h=[],r.__e(e,t.__v)}})),it=[]}r.__b=function(t){tt=null,ot&&ot(t)},r.__r=function(t){st&&st(t),Z=0;var e=(tt=t.__c).__H;e&&(e.__h.forEach(_t),e.__h.forEach(wt),e.__h=[])},r.diffed=function(t){at&&at(t);var e=t.__c;e&&e.__H&&e.__H.__h.length&&(1!==it.push(e)&&et===r.requestAnimationFrame||((et=r.requestAnimationFrame)||function(t){var e,n=function(){clearTimeout(r),bt&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,100);bt&&(e=requestAnimationFrame(n))})(vt)),tt=void 0},r.__c=function(t,e){e.some((function(t){try{t.__h.forEach(_t),t.__h=t.__h.filter((function(t){return!t.__||wt(t)}))}catch(n){e.some((function(t){t.__h&&(t.__h=[])})),e=[],r.__e(n,t.__v)}})),ct&&ct(t,e)},r.unmount=function(t){lt&&lt(t);var e=t.__c;if(e&&e.__H)try{e.__H.__.forEach(_t)}catch(t){r.__e(t,e.__v)}};var bt="function"==typeof requestAnimationFrame;function _t(t){var e=tt;"function"==typeof t.__c&&t.__c(),tt=e}function wt(t){var e=tt;t.__c=t.__(),tt=e}function yt(t,e){return!t||t.length!==e.length||e.some((function(e,n){return e!==t[n]}))}function xt(t,e){return"function"==typeof e?e(t):e}const kt=L(null);function Ot({store:t,children:e}){const n=gt((()=>({store:t})),[t]);return R(kt.Provider,Object.assign({value:n},{children:e}),void 0)}function St(){return mt(kt)}const jt=(t,e)=>t===e;function Ct(t,e){return{type:t,payload:e}}const Et={};function Tt(t,e=!0){return Ct("widgets/SET_ANIMATING",{id:t,animating:e})}function Pt(t,e){return Ct("widgets/SET_NOTIFICATION",{id:t,notification:e})}function It(t,e){return Ct("widgets/UPDATE_FORM_STATE",{id:t,formState:e})}function At(t,e,n){return Ct("widgets/SET_PENDING_ACTIONS",{id:t,actions:e,origin:n})}function Nt(t=Et,e){var n;if("widgets/CREATE_OR_UPDATE"===e.type)return Object.assign(Object.assign({},t),{[e.payload.id]:Object.assign(Object.assign({},e.payload),{show:!0})});const r=(null===(n=e.payload)||void 0===n?void 0:n.id)&&t[e.payload.id];if(r){const n=function(t,e){switch(e.type){case"widgets/RESET":return Object.assign(Object.assign({},t),{activePage:0,pageStack:[],formState:{data:{}}});case"widgets/SET_VISIBILITY":return Object.assign(Object.assign({},t),{show:e.payload.show});case"widgets/SET_ANIMATING":return Object.assign(Object.assign({},t),{animating:e.payload.animating});case"widgets/SET_NOTIFICATION":return Object.assign(Object.assign({},t),{notification:e.payload.notification});case"widgets/UPDATE_FORM_STATE":const{formState:n}=e.payload,r=n.data?Object.keys(n.data).reduce(((t,e)=>(t[e]=Object.assign(Object.assign({},t[e]),n.data[e]),t)),Object.assign({},t.formState.data)):t.formState.data;return Object.assign(Object.assign({},t),{formState:Object.assign(Object.assign(Object.assign({},t.formState),n),{data:r})});case"widgets/SET_FORM_FIELD_VALUE":return Object.assign(Object.assign({},t),{formState:Object.assign(Object.assign({},t.formState),{data:Object.assign(Object.assign({},t.formState.data),{[e.payload.fieldName]:e.payload.value}),pristine:!1})});case"widgets/GO_TO_PREV_PAGE":if(t.pageStack.length>0){const e=[...t.pageStack],n=Math.max(e.pop(),0);return Object.assign(Object.assign({},t),{activePage:n,pageStack:e})}return t;case"widgets/GO_TO_NEXT_PAGE":const i=Math.min(t.activePage+1,t.pages.length-1);return t.activePage!==i?Object.assign(Object.assign({},t),{activePage:i,pageStack:void 0===t.activePage?t.pageStack:[...t.pageStack,t.activePage]}):t;case"widgets/SET_PENDING_ACTIONS":return Object.assign(Object.assign({},t),{pendingActions:{actions:e.payload.actions,origin:e.payload.origin}});default:return t}}(r,e);if(r!==n)return Object.assign(Object.assign({},t),{[e.payload.id]:n})}return t}const $t={};function Dt(t=$t,e){switch(e.type){case"templateTags/SET":return Object.assign(Object.assign({},t),e.payload);default:return t}}const Lt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Y,Rt=t=>K(function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var i=e[r];"function"==typeof t[i]&&(n[i]=t[i])}var o,s=Object.keys(n);try{!function(t){Object.keys(t).forEach((function(e){var n=t[e];if(void 0===n(void 0,{type:G.INIT}))throw new Error(H(12));if(void 0===n(void 0,{type:G.PROBE_UNKNOWN_ACTION()}))throw new Error(H(13))}))}(n)}catch(a){o=a}return function(t,e){if(void 0===t&&(t={}),o)throw o;for(var r=!1,i={},a=0;a<s.length;a++){var c=s[a],l=n[c],u=t[c],d=l(u,e);if(void 0===d)throw e&&e.type,new Error(H(14));i[c]=d,r=r||d!==u}return(r=r||s.length!==Object.keys(t).length)?i:t}}({widgets:Nt,templateTags:Dt}),Lt(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(){var n=t.apply(void 0,arguments),r=function(){throw new Error(H(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=e.map((function(t){return t(i)}));return r=Y.apply(void 0,o)(n.dispatch),z(z({},n),{},{dispatch:r})}}}(nt.withExtraArgument(t)))),Wt=()=>function(){const{store:t}=St();return t}().dispatch,Mt=function(t,e=jt){const{store:n}=St(),r=pt(t),i=pt(e),[o,s]=dt((()=>r.current(n.getState())));return ht((()=>n.subscribe((()=>{s((t=>{const e=r.current(n.getState());return i.current(t,e)?t:e}))}))),[n]),o};function Ut(t,e){return t.widgets[e]}const Ft=U((function({id:t,name:e,pages:n,formState:r}){const i=n.map((t=>{var e;return(null===(e=t.data)||void 0===e?void 0:e.fields)||[]})).reduce(((t,e)=>t.concat(e)),[]).reduce(((t,e)=>{const n=function(t,e){const n=(null==e?void 0:e.value)||[];switch(t.type){case"select":case"checkbox":case"radio":return t.options.filter((t=>-1!==n.indexOf(t.name))).map((t=>t.label)).join();case"flag":return t.label;default:return n.join()}}(e,r.data[e.name]);return t[e.name]=""!=n?n:void 0,t}),{});return Object.assign(Object.assign({},i),{$widgetId:""+t,$widgetName:e})})),Vt=U(((t,e)=>Object.assign(Object.assign({},t),e)));function zt(t,e){const{templateTags:n,widgets:r}=t;return Vt(n,Ft(r[e]))}const Ht=L(void 0);function Bt({children:t,widgetId:e}){const n=gt((()=>({widgetId:e})),[e]);return R(Ht.Provider,Object.assign({value:n},{children:t}),void 0)}const qt=()=>mt(Ht);var Gt=n("SKuX");function Jt(t){const{randomizeOptions:e,options:n}=t;return e&&n&&n.length>1?Object.assign(Object.assign({},t),{options:Object(Gt.d)(n)}):t}function Kt(t){return"getsitecontrol-"+t}function Yt(t){return`[data-getsitecontrol-inline~="${t}"]`}function Xt(t,e){for(var n in e)t[n]=e[n];return t}function Qt(t,e){for(var n in t)if("__source"!==n&&!(n in e))return!0;for(var r in e)if("__source"!==r&&t[r]!==e[r])return!0;return!1}function Zt(t){this.props=t}function te(t,e){function n(t){var n=this.props.ref,r=n==t.ref;return!r&&n&&(n.call?n(null):n.current=null),e?!e(this.props,t)||!r:Qt(this.props,t)}function r(e){return this.shouldComponentUpdate=n,g(t,e)}return r.displayName="Memo("+(t.displayName||t.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r}(Zt.prototype=new v).isPureReactComponent=!0,Zt.prototype.shouldComponentUpdate=function(t,e){return Qt(this.props,t)||Qt(this.state,e)};var ee=r.__b;r.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),ee&&ee(t)};var ne="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function re(t){function e(e,n){var r=Xt({},e);return delete r.ref,t(r,(n=e.ref||n)&&("object"!=typeof n||"current"in n)?n:null)}return e.$$typeof=ne,e.render=e,e.prototype.isReactComponent=e.__f=!0,e.displayName="ForwardRef("+(t.displayName||t.name)+")",e}var ie=r.__e;function oe(){this.__u=0,this.t=null,this.__b=null}function se(t){var e=t.__.__c;return e&&e.__e&&e.__e(t)}function ae(){this.u=null,this.o=null}r.__e=function(t,e,n){if(t.then)for(var r,i=e;i=i.__;)if((r=i.__c)&&r.__c)return null==e.__e&&(e.__e=n.__e,e.__k=n.__k),r.__c(t,e);ie(t,e,n)},(oe.prototype=new v).__c=function(t,e){var n=e.__c,r=this;null==r.t&&(r.t=[]),r.t.push(n);var i=se(r.__v),o=!1,s=function(){o||(o=!0,n.componentWillUnmount=n.__c,i?i(a):a())};n.__c=n.componentWillUnmount,n.componentWillUnmount=function(){s(),n.__c&&n.__c()};var a=function(){if(!--r.__u){if(r.state.__e){var t=r.state.__e;r.__v.__k[0]=function t(e,n,r){return e&&(e.__v=null,e.__k=e.__k&&e.__k.map((function(e){return t(e,n,r)})),e.__c&&e.__c.__P===n&&(e.__e&&r.insertBefore(e.__e,e.__d),e.__c.__e=!0,e.__c.__P=r)),e}(t,t.__c.__P,t.__c.__O)}var e;for(r.setState({__e:r.__b=null});e=r.t.pop();)e.forceUpdate()}},c=!0===e.__h;r.__u++||c||r.setState({__e:r.__b=r.__v.__k[0]}),t.then(s,s)},oe.prototype.componentWillUnmount=function(){this.t=[]},oe.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=function t(e,n,r){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach((function(t){"function"==typeof t.__c&&t.__c()})),e.__c.__H=null),null!=(e=Xt({},e)).__c&&(e.__c.__P===r&&(e.__c.__P=n),e.__c=null),e.__k=e.__k&&e.__k.map((function(e){return t(e,n,r)}))),e}(this.__b,n,r.__O=r.__P)}this.__b=null}var i=e.__e&&g(m,null,t.fallback);return i&&(i.__h=null),[g(m,null,e.__e?null:t.children),i]};var ce=function(t,e,n){if(++n[1]===n[0]&&t.o.delete(e),t.props.revealOrder&&("t"!==t.props.revealOrder[0]||!t.o.size))for(n=t.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.u=n=n[2]}};function le(t){return this.getChildContext=function(){return t.context},t.children}function ue(t){var e=this,n=t.i;e.componentWillUnmount=function(){D(null,e.l),e.l=null,e.i=null},e.i&&e.i!==n&&e.componentWillUnmount(),t.__v?(e.l||(e.i=n,e.l={nodeType:1,parentNode:n,childNodes:[],appendChild:function(t){this.childNodes.push(t),e.i.appendChild(t)},insertBefore:function(t,n){this.childNodes.push(t),e.i.appendChild(t)},removeChild:function(t){this.childNodes.splice(this.childNodes.indexOf(t)>>>1,1),e.i.removeChild(t)}}),D(g(le,{context:e.context},t.__v),e.l)):e.l&&e.componentWillUnmount()}function de(t,e){return g(ue,{__v:t,i:e})}(ae.prototype=new v).__e=function(t){var e=this,n=se(e.__v),r=e.o.get(t);return r[0]++,function(i){var o=function(){e.props.revealOrder?(r.push(i),ce(e,t,r)):i()};n?n(o):o()}},ae.prototype.render=function(t){this.u=null,this.o=new Map;var e=O(t.children);t.revealOrder&&"b"===t.revealOrder[0]&&e.reverse();for(var n=e.length;n--;)this.o.set(e[n],this.u=[1,0,this.u]);return t.children},ae.prototype.componentDidUpdate=ae.prototype.componentDidMount=function(){var t=this;this.o.forEach((function(e,n){ce(t,n,e)}))};var he="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,pe=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,ge=function(t){return("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/i:/fil|che|ra/i).test(t)};v.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach((function(t){Object.defineProperty(v.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})}));var fe=r.event;function me(){}function ve(){return this.cancelBubble}function be(){return this.defaultPrevented}r.event=function(t){return fe&&(t=fe(t)),t.persist=me,t.isPropagationStopped=ve,t.isDefaultPrevented=be,t.nativeEvent=t};var _e={configurable:!0,get:function(){return this.class}},we=r.vnode;r.vnode=function(t){var e=t.type,n=t.props,r=n;if("string"==typeof e){for(var i in r={},n){var o=n[i];"value"===i&&"defaultValue"in n&&null==o||("defaultValue"===i&&"value"in n&&null==n.value?i="value":"download"===i&&!0===o?o="":/ondoubleclick/i.test(i)?i="ondblclick":/^onchange(textarea|input)/i.test(i+e)&&!ge(n.type)?i="oninput":/^on(Ani|Tra|Tou|BeforeInp)/.test(i)?i=i.toLowerCase():pe.test(i)?i=i.replace(/[A-Z0-9]/,"-$&").toLowerCase():null===o&&(o=void 0),r[i]=o)}"select"==e&&r.multiple&&Array.isArray(r.value)&&(r.value=O(n.children).forEach((function(t){t.props.selected=-1!=r.value.indexOf(t.props.value)}))),"select"==e&&null!=r.defaultValue&&(r.value=O(n.children).forEach((function(t){t.props.selected=r.multiple?-1!=r.defaultValue.indexOf(t.props.value):r.defaultValue==t.props.value}))),t.props=r}e&&n.class!=n.className&&(_e.enumerable="className"in n,null!=n.className&&(r.class=n.className),Object.defineProperty(r,"className",_e)),t.$$typeof=he,we&&we(t)};var ye=r.__r;r.__r=function(t){ye&&ye(t),t.__c},"object"==typeof performance&&"function"==typeof performance.now&&performance.now.bind(performance);var xe=n("0iFO"),ke=n("dbSD");const Oe=["click","contextmenu","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseout","mouseup","keydown","keypress","keyup","blur","change","focus","focusin","focusout","input","invalid","reset","search","select","submit","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","copy","cut","paste","mousewheel","wheel","touchcancel","touchend","touchmove","touchstart"],Se=()=>{},je=()=>{},Ce=new Map;function Ee(t){return Ce.has(t)||Ce.set(t,(t=>window.matchMedia(t.replace(/@media\s*/gi,"")))(t)),Ce.get(t)}const Te=t=>t&&document.querySelector(t)||null;var Pe=n("D57K");const Ie=re((function(t,e){const{children:n}=t,r=Object(Pe.a)(t,["children"]);return R("getsitecontrol-widget",Object.assign({},r,{ref:e},{children:n}),void 0)}));class Ae extends v{getChildContext(){return this.props.context}render(){return this.props.children}}class Ne extends v{shouldComponentUpdate(t){return this._update(t),!0}componentDidMount(){this._shadow=this.base.attachShadow({mode:"open"}),this._update(this.props)}componentWillUnmount(){this._update(this.props,!0)}render(){const t=this.props,{host:e,children:n,hostRef:r}=t,i=Object(Pe.a)(t,["host","children","hostRef"]);return R(e,Object.assign({},i,{ref:r}),void 0)}_update(t,e=!1){D(e?null:R(Ae,Object.assign({context:this.context},{children:t.children}),void 0),this._shadow)}}var $e=n("O94r"),De=n.n($e);const Le={flyby:function(t){return".root{position:fixed;width:var(--root-width);max-width:var(--root-max-width);min-height:0;left:0;right:0;bottom:10px;margin:0 auto}@media screen and (min-width: 960px){.root{left:32px;right:auto;bottom:32px;margin:0}}.container{position:relative;overflow:var(--root-overflow);padding-top:var(--root-padding-top);padding-right:var(--root-padding-right);padding-bottom:var(--root-padding-bottom);padding-left:var(--root-padding-left);background-color:var(--root-bg);color:var(--root-color);border-radius:8px}.back,\n.close,\n.caret{padding:20px;position:absolute;z-index:1}.back{padding-right:10px;top:0;right:41px}.close{top:0;right:0}.back + .close{padding-left:10px}"},bar:function(t){return".root{position:fixed;margin:0 auto;width:var(--root-width);max-width:var(--root-max-width);min-height:0;top:0;left:0;right:0}.container{display:flex;flex-direction:row;align-items:center;position:relative;overflow:var(--root-overflow);padding-top:var(--root-padding-top);padding-right:var(--root-padding-right);padding-bottom:var(--root-padding-bottom);padding-left:var(--root-padding-left);background-color:var(--root-bg);color:var(--root-color)}.body{margin:0 auto;width:100%;min-width:0}@media screen and (min-width: 960px){.body{width:auto}}.back,\n.close,\n.caret{padding:16px;position:absolute;z-index:1}.back{padding-right:8px;top:0;right:35px}.close{top:0;right:0}.back + .close{padding-left:8px}@media screen and (min-width: 960px){.back{top:auto;right:auto;left:0;padding:20px}}@media screen and (min-width: 960px){.close{top:auto;padding:20px}.back + .close{padding-left:20px}}"},panel:function(t){return".root{position:fixed;width:var(--root-width);max-width:var(--root-max-width);min-height:0;transition:transform 200ms;bottom:0;left:0;right:0;margin:0 auto}@media screen and (min-width: 960px){.root{left:32px;right:auto;margin:0}}.root.collapsed{transform:translateY(100%) translateY(-60px)}.container{display:flex;flex-direction:column;max-height:90vh;position:relative;overflow:var(--root-overflow);background-color:var(--root-bg);color:var(--root-color);border-radius:8px 8px 0 0}.header{height:60px;display:flex;flex:none;align-items:center;justify-content:flex-end;position:relative;cursor:pointer}.header .title{flex-grow:9999;margin:0 12px 0 28px;word-wrap:normal;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.body{flex:1 1 auto;overflow-y:auto;padding-top:var(--root-padding-top);padding-right:var(--root-padding-right);padding-bottom:var(--root-padding-bottom);padding-left:var(--root-padding-left)}.back,\n.close,\n.caret{padding:16px;flex-grow:0;flex-shrink:0}.back{padding-right:8px}.back + .close{padding-left:8px}.caret{padding-right:28px}.back + .caret{padding-left:8px}"},modal:function(t){return".overlay{contain:content;z-index:2147483636;position:fixed;top:0;right:0;bottom:0;left:0;outline:0;line-height:1.25;-webkit-overflow-scrolling:touch;background:rgba(255,255,255,0.7);display:flex;overflow-x:hidden;overflow-y:scroll;padding:32px 0;align-items:center}.root{margin:auto;width:var(--root-width);max-width:var(--root-max-width);min-height:0}.container{position:relative;overflow:var(--root-overflow);padding-top:var(--root-padding-top);padding-right:var(--root-padding-right);padding-bottom:var(--root-padding-bottom);padding-left:var(--root-padding-left);background-color:var(--root-bg);color:var(--root-color);border-radius:8px}.back,\n.close,\n.caret{padding:20px;position:absolute;z-index:1}.back{padding-right:10px;top:0;right:41px}.close{top:0;right:0}.back + .close{padding-left:10px}"},fullscreen:function(t){var e=".root{contain:content;z-index:2147483636;\n  ";return t.inline?e+="position:absolute;\n  ":e+="position:fixed;\n  ",e+"top:0;right:0;bottom:0;left:0;outline:0;line-height:1.25;-webkit-overflow-scrolling:touch;overflow-x:hidden;overflow-y:scroll}.container{display:flex;width:100%;min-height:100%;position:relative;overflow:var(--root-overflow);padding-top:var(--root-padding-top);padding-right:var(--root-padding-right);padding-bottom:var(--root-padding-bottom);padding-left:var(--root-padding-left);background-color:var(--root-bg);color:var(--root-color)}.body{width:var(--root-width);max-width:var(--root-max-width);margin:0 auto}@media screen and (min-width: 960px){.body{margin:auto}}.back,\n.close,\n.caret{padding:20px;position:absolute;z-index:1}.back{padding-right:10px;top:0;right:41px}.close{top:0;right:0}.back + .close{padding-left:10px}\n"},sidebar:function(t){return".root{position:fixed;width:var(--root-width);max-width:var(--root-max-width);min-height:0;overflow-y:auto;right:0;bottom:0;top:0}.container{display:flex;min-height:100%;position:relative;overflow:var(--root-overflow);padding-top:var(--root-padding-top);padding-right:var(--root-padding-right);padding-bottom:var(--root-padding-bottom);padding-left:var(--root-padding-left);background-color:var(--root-bg);color:var(--root-color)}.body{width:100%;margin:0 auto}@media screen and (min-width: 960px){.body{margin:auto}}.back,\n.close,\n.caret{padding:16px;position:absolute;z-index:1}.back{padding-right:8px;top:0;right:35px}.close{top:0;right:0}.back + .close{padding-left:8px}"},inline:function(t){return":host{display:block}.root{width:var(--root-width);max-width:var(--root-max-width)}.container{position:relative;overflow:var(--root-overflow);padding-top:var(--root-padding-top);padding-right:var(--root-padding-right);padding-bottom:var(--root-padding-bottom);padding-left:var(--root-padding-left);background-color:var(--root-bg);color:var(--root-color)}.back{position:absolute;padding:20px;z-index:1;top:0;right:0}"}};const Re=te((function({layout:t,css:e}){const n=function(t,e=""){let n=e.replace(/:host(?:\s*\((.*)\))?/g,":host$1");return"modal"===t&&(n=n.replace(/(:host\.(?:enter|leave))\s+\.container/g,"$1"),n=n.replace(/:host\s*{/g,".overlay {")),n.replace(/:host/g,".root")}(t,e),r=function(t){const e=[],n=/@import .*fonts\.googleapis\.com.*;/gi;let r;for(;null!==(r=n.exec(t));)e.push(r[0]);return e}(n).join("\n");return R(m,{children:[r&&de(R("style",{children:r},void 0),document.head),R("style",{children:n},void 0)]},void 0)})),We="(max-width: 960px)",Me=[We];function Ue(t){var e;const{style:n,activePage:r,pages:i}=t,o=null===(e=i[r])||void 0===e?void 0:e.style,s=(t=>{const[e,n]=dt((()=>t.reduce(((t,e)=>(t[e]=Ee(e).matches,t)),{})));return ht((()=>{const e=t.map((t=>Ee(t)));let r=!0;const i=()=>{if(!r)return;const i=e.reduce(((e,n,r)=>(e[t[r]]=n.matches,e)),{});n(i)};return e.forEach((t=>t.addListener(i))),()=>{r=!1,e.forEach((t=>t.removeListener(i)))}}),[t]),e})(Me)[We]?"mobile":"desktop";return gt((()=>function(t,...e){return[...e].flatMap((e=>{var{media:n}=e;return[Object(Pe.a)(e,["media"]),null==n?void 0:n[t]]})).reduce(((t,e={})=>{const n=[t.css,e.css].filter(Boolean).join("\n"),r=[...t.images||[],...e.images||[]],i=Object.assign(Object.assign({},t.colors),e.colors);return Object.assign(Object.assign(Object.assign({},t),e),{css:n,images:r,colors:i})}),{})}(s,n,o)),[s,n,o])}const Fe=(t,e)=>Math.min(Math.max(t,0),e),Ve=t=>Fe(t,1),ze="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",He=`[\\s|\\(]+(${ze})[,|\\s]+(${ze})[,|\\s]+(${ze})\\s*\\)?`,Be=`[\\s|\\(]+(${ze})[,|\\s]+(${ze})[,|\\s]+(${ze})[,|\\s]+(${ze})\\s*\\)?`,qe={rgb:new RegExp("rgb"+He),rgba:new RegExp("rgba"+Be),hsl:new RegExp("hsl"+He),hsla:new RegExp("hsla"+Be),hsv:new RegExp("hsv"+He),hsva:new RegExp("hsva"+Be),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};class Ge{constructor(t,e){this._r=0,this._g=0,this._b=0,this._a=1,this._isValid=!1,"string"==typeof t&&(t=Ge.parseString(t)),t&&(this._r=Fe(t.r,255),this._g=Fe(t.g,255),this._b=Fe(t.b,255),this._a=Ve(void 0!==e?e:t.a),this._isValid=!0)}static fromString(t,e){return new Ge(t,e)}static rgb(t,e,n){return Ge.rgba(t,e,n,1)}static rgba(t,e,n,r){return new Ge({r:t,g:e,b:n,a:r})}static hsl(t,e,n){return Ge.hsla(t,e,n,1)}static hsla(t,e,n,r){t=t%360/360,e=Ve(e),n=Ve(n),r=Ve(r);const i=n<=.5?n*(e+1):n+e-n*e,o=2*n-i,s=t=>6*(t=t<0?t+1:t>1?t-1:t)<1?o+(i-o)*t*6:2*t<1?i:3*t<2?o+(i-o)*(2/3-t)*6:o;return Ge.rgba(255*s(t+1/3),255*s(t),255*s(t-1/3),r)}static hsv(t,e,n){return Ge.hsva(t,e,n,1)}static hsva(t,e,n,r){t=t%360/360*360;const i=Math.floor(t/60%6),o=t/60-i,s=[n,n*(1-e),n*(1-o*e),n*(1-(1-o)*e)],a=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]];return Ge.rgba(255*s[a[i][0]],255*s[a[i][1]],255*s[a[i][2]],r)}static parseString(t){t=t.replace(/^[\s,#]+/,"").replace(/\s+$/,"").toLowerCase();let e=qe.rgb.exec(t);if(e)return{r:+e[1],g:+e[2],b:+e[3],a:1};if(e=qe.rgba.exec(t),e)return{r:+e[1],g:+e[2],b:+e[3],a:+e[4]};if(e=qe.hex6.exec(t),e){const t=e.slice(1,4).map((t=>parseInt(t,16)));return{r:t[0],g:t[1],b:t[2],a:1}}if(e=qe.hex3.exec(t),e){const t=e.slice(1,4).map((t=>parseInt(t+t,16)));return{r:t[0],g:t[1],b:t[2],a:1}}return null}isValid(){return this._isValid}toRgbaString(){const{r:t,g:e,b:n,a:r}=this.toRgba();return`rgba(${[t,e,n,r].join(",")})`}toRgb(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b)}}toRgba(){return Object.assign(Object.assign({},this.toRgb()),{a:Math.round(100*this._a)/100})}toHsl(){const t=this._r/255,e=this._g/255,n=this._b/255,r=this._a,i=Math.max(t,e,n),o=Math.min(t,e,n),s=(i+o)/2,a=i-o;let c,l;if(i===o)c=l=0;else{switch(l=s>.5?a/(2-i-o):a/(i+o),i){case t:c=(e-n)/a+(e<n?6:0);break;case e:c=(n-t)/a+2;break;case n:c=(t-e)/a+4}c/=6}return{h:360*c,s:l,l:s,a:r}}luma(){let t=this._r/255,e=this._g/255,n=this._b/255;return t=t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4),e=e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4),n=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4),.2126*t+.7152*e+.0722*n}lighten(t){const{h:e,s:n,l:r,a:i}=this.toHsl();return Ge.hsla(e,n,r+t/100,i)}darken(t){const{h:e,s:n,l:r,a:i}=this.toHsl();return Ge.hsla(e,n,r-t/100,i)}fade(t){const{h:e,s:n,l:r}=this.toHsl();return Ge.hsla(e,n,r,t/100)}fadeout(t,e=!1){const{h:n,s:r,l:i,a:o}=this.toHsl();return e&&(t*=o),Ge.hsla(n,r,i,o-t/100)}static contrast(t,e=Ge.rgba(255,255,255,1),n=Ge.rgba(0,0,0,1),r=.43){if(e.luma()>n.luma()){const t=n;n=e,e=t}return t.luma()<r?n:e}}function Je(t){return Ge.contrast(t,Ge.fromString("#4c4c4c"),Ge.fromString("#ffffff"))}function Ke(t){const e=Ge.fromString(t);return Ge.contrast(e,e.darken(5),e.lighten(5)).toRgbaString()}const Ye=({viewBox:t,stroke:e,strokeWidth:n=1},r)=>`url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="${t}" fill="none" stroke="${e}" stroke-linecap="round" stroke-linejoin="round" stroke-width="${n}">${r}</svg>')`,Xe=t=>Ye({viewBox:"0 0 12 12",stroke:t},'<path fill="none" d="M1 3.95L5.95 8.9l4.95-4.95" />');function Qe(t){const{colors:e,width:n,maxWidth:r,padding:i={},overflow:o}=t,{background:s,text:a,button:c,buttonHover:l,buttonText:u,secondaryButton:d,secondaryButtonHover:h,secondaryButtonText:p,normalButton:g,normalButtonText:f,input:m,inputText:v,inputPlaceholder:b}=function(t={}){const e=Object.assign(Object.assign({},function(t="#ffffff",e){const n=Ge.fromString(t),r=e?Ge.fromString(e):Je(n),i=Ge.contrast(n,n.darken(20),n.lighten(20)),o=Ge.contrast(n,n.darken(10),n.lighten(10)),s=Ge.contrast(n,r.fade(5),r.fade(15)),a=Ge.contrast(n,r.fade(5),r.fade(15)),c={background:n,text:r,headerText:r,button:i,buttonText:Je(i),input:a,inputText:r,secondaryButton:o,secondaryButtonText:r,normalButton:s,normalButtonText:r};return Object(Gt.c)(c,(t=>t.toRgbaString()))}(t.background,t.text)),Object(Gt.c)(t,(t=>Ge.fromString(t).toRgbaString())));return Object.assign(Object.assign({},e),{buttonHover:Ke(e.button),secondaryButtonHover:Ke(e.secondaryButton),inputPlaceholder:(n=e.inputText,Ge.fromString(n).fadeout(50,!0).toRgbaString())});var n}(e);return`\n:host {\n  --root-width: ${n};\n  --root-max-width: ${r};\n  --root-padding-left: ${i.left};\n  --root-padding-top: ${i.top};\n  --root-padding-right: ${i.right};\n  --root-padding-bottom: ${i.bottom};\n  --root-overflow: ${o};\n  --root-bg: ${s};\n  --root-color: ${a};\n  --button-primary-bg: ${c};\n  --button-primary-hover-bg: ${l};\n  --button-primary-color: ${u};\n  --button-secondary-bg: ${d};\n  --button-secondary-hover-bg: ${h};\n  --button-secondary-color: ${p};\n  --button-normal-bg: ${g};\n  --button-normal-color: ${f};\n  --input-bg: ${m};\n  --input-color: ${v};\n  --input-placeholder-color: ${b};\n  --icon-close: ${_=a,Ye({viewBox:"0 0 24 24",strokeWidth:2,stroke:_},'<path d="M1.458 1.458l21.084 21.084m0-21.084L1.458 22.542" />')};\n  --icon-back: ${(t=>Ye({viewBox:"0 0 16 11",stroke:t},'<path d="M1 5.5h15M5.5.55L.55 5.5l4.95 4.95" />'))(a)};\n  --icon-caret: ${Xe(a)};\n  --icon-arrow: ${Xe(v)};\n  --icon-checkmark: ${(t=>Ye({viewBox:"0 0 12 12",strokeWidth:2,stroke:t},'<path fill="none" d="M2.11 5.56l2.83 2.83 4.95-4.95" />'))(v)};\n}\n`;var _}function Ze({widget:t,inline:e}){const n=Ue(t),r=gt((()=>Qe(n)),[n]),i=gt((()=>function(t,e){const n=function(t,e){const n={big:!1,horizontal:!1,inline:e};switch(t){case"bar":return Object.assign(Object.assign({},n),{horizontal:!0});case"modal":case"fullscreen":case"sidebar":case"inline":return Object.assign(Object.assign({},n),{big:!0});default:return n}}(t,e),r=function(t){return Le[t]||(()=>"")}(t);return o="@media print{:host{display:none!important}}:host{all:initial}*,\n::before,\n::after{box-sizing:border-box}span,\na,\nform,\nlabel,\ndiv,\nu,\ni,\nem,\nb,\nstrong,\np,\nh1,\nul,\nol,\nli,\nimg{margin:0;font-family:inherit;line-height:inherit;font-size:inherit;font-weight:inherit;font-style:inherit}a,\na:focus,\na:active{-webkit-tap-highlight-color:rgba(0,0,0,0);text-decoration:none}img{display:block}::-webkit-input-placeholder,\n:-moz-placeholder,\n::-moz-placeholder,\ninput:-ms-input-placeholder{color:inherit;text-overflow:ellipsis;opacity:1;overflow:hidden;white-space:nowrap;vertical-align:middle;font-size:inherit;text-align:inherit;font-weight:normal;position:static}[placeholder]{text-overflow:ellipsis}input::-moz-placeholder,\ninput:-moz-placeholder,\ninput:-ms-input-placeholder{text-overflow:ellipsis}input,\nbutton{-webkit-appearance:none;appearance:none}input,\ntextarea,\nselect{border:0;background:none;font-family:inherit;outline:0 none;font-size:inherit}a,\na *,\ninput[type='submit'],\ninput[type='button'],\ninput[type='radio'],\ninput[type='checkbox'],\nselect,\nbutton{cursor:pointer}button,\ninput[type='submit']{margin:0;padding:0;border:0;background:none;width:auto;height:auto;text-shadow:none;box-shadow:none;font-family:inherit;font-size:inherit;line-height:1;letter-spacing:normal;float:none;font-weight:bold;outline:initial}svg{cursor:inherit;color:currentColor;fill:none;stroke:currentcolor}textarea{line-height:1.2;overflow:auto;resize:none}input:-webkit-autofill,\ntextarea:-webkit-autofill,\nselect:-webkit-autofill{background-color:transparent;-webkit-box-shadow:0 0 0 1000px white inset}label,\nbutton,\nbutton:focus,\nbutton:active,\nbutton:hover,\nspan,\ndiv,\ninput,\ntextarea,\na,\na:focus,\na:hover,\na:active{color:inherit}b{font-weight:bold}u{text-decoration:underline}i{font-style:italic}.title{white-space:normal;overflow-wrap:break-word;word-wrap:break-word;word-break:normal;color:var(--root-color);font-weight:bold;cursor:inherit}\n",(i=n).big?o+=".title{font-size:20px;line-height:1.4}@media screen and (min-width: 960px){.title{font-size:24px;line-height:1.3}}\n":i.horizontal?o+=".title{line-height:1.5;font-weight:normal}\n":o+=".title{font-size:20px;line-height:1.4}\n",o+=".description{white-space:normal;overflow-wrap:break-word;word-wrap:break-word;word-break:normal;line-height:1.5}.note{white-space:normal;overflow-wrap:break-word;word-wrap:break-word;word-break:normal;font-size:14px;line-height:1.4}.title a,\n.description a,\n.note a{vertical-align:baseline;text-decoration:underline}.button{text-decoration:none;display:block;border:solid 1px transparent;white-space:nowrap;outline:0;font-family:inherit;font-weight:bold;border-radius:4px;transition:background-color 0.2s ease-out;line-height:1.5;padding:11px 23px;position:relative}.button > span{display:block;word-wrap:normal;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.button > *{min-width:0}.button::-moz-focus-inner{padding:0;border:0}.button:hover,\n.button:focus,\n.button:active,\n.button:disabled{outline:0;text-decoration:none}.button.primary{color:var(--button-primary-color);background:var(--button-primary-bg)}.button.primary:hover,\n.button.primary:focus,\n.button.primary:active{color:var(--button-primary-color);background:var(--button-primary-hover-bg)}.button.primary.icon{display:flex;align-items:center;padding-left:13px;padding-right:13px}.button.primary.icon svg{width:20px;height:24px;stroke-width:1px}.button.secondary{color:var(--button-secondary-bg);background:var(--button-secondary-bg)}.button.secondary:hover,\n.button.secondary:focus,\n.button.secondary:active{background:var(--button-secondary-hover-bg);color:var(--button-secondary-bg)}.button.secondary.icon{display:flex;align-items:center;padding:16px}.button.secondary.icon svg{width:14px;height:14px;stroke-width:2px}.button.normal{color:var(--button-normal-color);background:var(--button-normal-bg)}.button.normal:hover,\n.button.normal:focus,\n.button.normal:active{color:var(--button-normal-color)}.button.normal.icon{display:flex;align-items:center;padding-left:13px;padding-right:13px}.button.normal.icon svg{width:20px;height:24px;stroke-width:1px}.close,\n.back,\n.caret{color:inherit}.close::before,\n.back::before,\n.caret::before{display:block;background-position:center;background-repeat:no-repeat;transform-origin:center center;transition:transform 300ms,opacity 200ms;opacity:0.5;content:''}.close:hover::before,\n.back:hover::before,\n.caret:hover::before{opacity:1}.close::before{width:11px;height:11px;background-image:var(--icon-close)}.close:hover::before{transform:rotate(90deg)}.back::before{width:16px;height:11px;background-image:var(--icon-back)}.back:hover::before{transform:translateX(-3px)}.caret::before{width:12px;height:12px;background-image:var(--icon-caret)}.caret:hover::before{transform:translateY(3px)}.caret.collapsed::before{transform:rotate(180deg)}.caret.collapsed:hover::before{transform:rotate(180deg) translateY(3px)}.success-icon{display:none;position:absolute;top:50%;left:50%;z-index:2;transform:translate(-50%,-50%)}.success-icon path{fill:var(--root-color);stroke:transparent;opacity:0}.success-icon circle{fill:transparent;stroke:var(--root-color);stroke-width:2px;stroke-linecap:round;stroke-dasharray:150.72 150.72}.success-icon polyline{fill:transparent;stroke:var(--root-color);stroke-width:2px;stroke-dasharray:36 36}.input-check{font-size:inherit;white-space:normal;display:flex;width:100%;\n  ",i.horizontal?o+="flex-direction:row;flex-wrap:nowrap;\n  ":o+="flex-direction:column;\n  ",o+="position:relative}.input-check label{text-align:left;cursor:pointer;overflow:hidden;display:flex;line-height:24px;\n  ",i.horizontal?o+="flex-direction:row;flex-wrap:nowrap;flex-shrink:0;flex-grow:1;align-items:center;margin:0 8px 0 0;\n  ":o+="flex-direction:column;margin:0 0 8px 0\n  ",o+="}.input-check label:last-of-type{\n  ",i.horizontal?o+="margin-right:0;\n  ":o+="margin-bottom:0\n  ",o+="}.input-check input[type='checkbox'],\n.input-check input[type='radio']{visibility:hidden;position:absolute;top:4px;font-size:inherit;width:16px;height:16px}.input-check input[type='checkbox'],\n.input-check input[type='radio'],\n.input-check input[type='checkbox']:hover,\n.input-check input[type='radio']:hover,\n.input-check input[type='checkbox']:active,\n.input-check input[type='radio']:active,\n.input-check input[type='checkbox']:focus,\n.input-check input[type='radio']:focus{margin:0;padding:0;background:transparent}.input-check span{display:block;position:relative;padding:0 0 0 24px;cursor:inherit;color:var(--input-color);min-height:16px;\n  ",i.horizontal?o+="flex-shrink:0;padding-right:8px;word-wrap:normal;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;\n  ":o+="white-space:normal;overflow-wrap:break-word;word-wrap:break-word;word-break:normal\n  ",o+="}.input-check span:after,\n.input-check span:before{position:absolute;left:0;top:4px;width:16px;height:16px;display:block}.input-check span:after{will-change:transform;transition:transform 100ms cubic-bezier(0.455,0.03,0.515,0.955);transform:scale(0,0);color:var(--input-color)}.input-check span:empty{padding:0 16px}.input-check span:empty:before,\n.input-check span:empty:after{display:none}.input-check span a{text-decoration:underline}.input-check input[type='checkbox'] + span:after{content:'';background-image:var(--icon-checkmark);background-size:80%;background-position:center;background-repeat:no-repeat}.input-check input[type='radio'] + span:before,\n.input-check input[type='checkbox'] + span:before{content:'';background-color:var(--input-bg)}.input-check input[type='checkbox'] + span:before{border-radius:4px}.input-check input[type='radio'] + span:after{content:'';background-color:var(--root-color);border-radius:50%;width:8px;height:8px;margin:4px}.input-check input[type='checkbox']:checked + span:after{transform:scale(1,1)}.input-check input[type='radio']:checked + span:after{transform:scale(1,1)}.input-check input[type='radio'] + span:before{border-radius:50%}.input-rating{display:flex;flex-wrap:nowrap;\n  ",i.horizontal?o+="flex-direction:row;align-items:center;\n  ":o+="flex-direction:column;\n  ",o+="overflow:hidden}.input-rating .stars{flex-shrink:0;display:flex;flex-direction:row-reverse;justify-content:flex-end}.input-rating input[type='radio']{position:absolute;left:-9999px;width:24px;height:24px;margin:0;opacity:0}.input-rating svg{transition:all 200ms;stroke-opacity:0.3}.input-rating label{display:block;width:32px;height:24px;padding:0 8px 0 0;margin:0;cursor:pointer}.input-rating label svg{width:100%;height:100%;fill:transparent}.input-rating:hover label svg{fill:transparent}.input-rating input:checked ~ label svg{fill:currentcolor;stroke-opacity:1}.input-rating:hover label:hover svg,\n.input-rating:hover label:hover ~ label svg{fill:currentcolor;stroke-opacity:1}.input-select{position:relative;width:100%;border-radius:4px;background:var(--input-bg)}.input-select:after{pointer-events:none;display:block;content:' ';opacity:0.5;right:16px;top:50%;transform:translateY(-50%);width:12px;height:12px;background-position:center;background-repeat:no-repeat;position:absolute;transition:opacity 200ms;background-image:var(--icon-arrow)}.input-select:hover:after{opacity:1}.input-select select{line-height:1.5;padding:12px 40px 12px 16px;-webkit-appearance:none;-moz-appearance:none;cursor:pointer;-webkit-user-select:none;user-select:none;width:100%;color:var(--input-color);word-wrap:normal;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.input-select select option{background:white;color:#333;word-wrap:normal;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.input-select select::-ms-expand{display:none}.input-text{width:100%;max-width:100%;line-height:1.5;border:solid 1px transparent;padding:11px 15px;color:var(--input-color);border-radius:4px;background:var(--input-bg)}.input-text::placeholder{color:var(--input-placeholder-color)}.input-textarea{width:100%;max-width:100%;border:0;color:var(--input-color);background:var(--input-bg);font-size:inherit;border-radius:4px;line-height:1.5;border:solid 1px transparent;padding:11px 15px;\n  ",i.horizontal?o+="height:48px;overflow-y:hidden;\n  ":o+="overflow-y:auto\n  ",o+="}.input-textarea::placeholder{white-space:normal;color:var(--input-placeholder-color)}\n",i.horizontal?o+=".fields{display:flex;overflow:hidden;align-items:center;flex-grow:1;margin-right:16px}\n":o+=".fields{width:100%;display:flex;flex-direction:column;margin-bottom:20px}\n",o+=".field-title{display:block;color:var(--root-color);\n  ",i.horizontal?o+="flex:none;margin:0 12px 0 0;\n  ":o+="width:100%;white-space:normal;overflow-wrap:break-word;word-wrap:break-word;word-break:normal;margin:0 0 4px 0;\n  ",o+="line-height:1.5}.field-title a{vertical-align:baseline;text-decoration:underline}\n",i.horizontal?o+=".field{display:flex;align-items:center;width:auto;min-width:0;flex:1 1 auto;overflow:hidden}.field,\n.field:focus{outline:none}\n":o+=".field{width:100%}.field + .field{margin:16px 0 0 0}\n",o+="\n",i.horizontal?o+=".form{display:flex;flex-direction:row;align-items:flex-end;width:100%}@media screen and (min-width: 960px){.form{width:auto;max-width:100%}}\n":o+=".form{display:flex;flex-direction:column;flex-wrap:nowrap}\n",o+=".content{position:relative;display:flex;flex-direction:column}\n",i.horizontal?o+="@media screen and (min-width: 960px){.content{flex-direction:row;flex-wrap:nowrap;align-items:center}}.title,\n.description{margin:0 0 12px 0}.note{margin:12px 0 0 0}@media screen and (min-width: 960px){.title,\n  .description{margin:0 16px 0 0}.note{margin:0 0 0 16px}}\n":o+=".title,\n.description{margin-bottom:20px}.note{margin-top:20px}\n",o+=".buttons{display:flex;flex-direction:row;\n  ",i.horizontal?o+="flex-wrap:nowrap;\n  ":o+="flex-wrap:wrap\n  ",o+"}.buttons .button.icon{flex-shrink:0;flex-grow:0}.root{-webkit-text-size-adjust:100%;z-index:2147483635;font-family:'Helvetica Neue',Helvetica,Arial,sans-serif;font-size:16px}.root.before-enter{display:none}@font-face{font-family:emoji;src:local('Apple Color Emoji'),local('Android Emoji'),local('Segoe UI'),local(EmojiSymbols),local(Symbola);\n  /* Emoji unicode blocks */unicode-range:U+1F300-1F5FF,U+1F600-1F64F,U+1F680-1F6FF,U+2600-26FF}"+r(n);var i,o}(t.layout,e)),[t.layout,e]);return R(m,{children:[R("style",{children:r},void 0),R("style",{children:i},void 0),R(Re,{layout:t.layout,css:n.css},void 0)]},void 0)}function tn(t){const e=document.documentElement.style;for(const n in t)e[n]!==t[n]&&(e[n]=t[n])}const en=t=>new Promise((e=>setTimeout(e,t))),nn=(t,e=2500)=>async(n,r)=>{for(;e>0;){if(await en(100),!r().widgets[t].animating)return;e-=100}};function rn(t){switch(t.type){case"submit":return 3;case"showWidget":case"copyToClipboard":return 2;case"url":return"_blank"===t.target?2:1;case"applyCoupon":case"addToCart":return t.redirect?1:2;case"back":case"close":return 0}}const on=(t,e)=>async(n,r,i)=>{const o=zt(r(),t);switch(e.type){case"back":return n(Ct("widgets/GO_TO_PREV_PAGE",{id:t})),!0;case"url":const r=Object(xe.b)(e.url,o,encodeURIComponent);return i.openUrl(t,r,e.target);case"showWidget":return i.showWidget(e.id,t);case"copyToClipboard":return i.copyToClipboard(t,Object(xe.b)(e.text,o));case"addToCart":return i.addToCart(t,e.selectionType,e.items,e.redirect);case"applyCoupon":return i.applyCoupon(t,Object(xe.b)(e.coupon,o),e.redirect);case"close":return i.closeWidget(t)}return!0};const sn=(t,e,n,r=!1)=>async i=>{if(function(t){return t.some((t=>"submit"===t.type))}(e))return i(At(t,e.filter((t=>"submit"!==t.type)),n)),!0;const{preActions:o,postActions:s}=function(t){const e=(t=function(t){return[...t].sort(((t,e)=>rn(e)-rn(t)))}(t)).findIndex((t=>rn(t)<2));return-1===e?{preActions:t,postActions:[]}:{preActions:t.slice(0,e),postActions:t.slice(e)}}(e),a=r?null:function(t){return t.reduce(((t,e)=>("copyToClipboard"===e.type||"addToCart"===e.type||"applyCoupon"===e.type)&&e.successMessage||t),"")}(o);let c=!0;for(const e of o)c=c&&await i(on(t,e));c&&a&&await i(((t,e,n)=>async(r,i)=>{if(!e||!n)return;const o=zt(i(),t),s={message:Object(xe.b)(n,o),name:e};r(Pt(t,s)),await en(1500),i().widgets[t].notification===s&&r(Pt(t,null))})(t,n,a));for(const e of s)await i(on(t,e));return await i(nn(t)),c},an=()=>{const t=Wt(),{widgetId:e}=qt();return ft(((n,r)=>t(sn(e,n,r))),[t,e])};function cn(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}const ln=t=>{const{widgetId:e}=qt(),n=Mt((t=>Ut(t,e).notification));return(null==n?void 0:n.name)===t&&n.message||null},un=({name:t})=>{const e=ln(t);return e?R("div",Object.assign({className:"notification"},{children:e}),void 0):null},dn=["input","fieldset","button","select","textarea",".input-rating",".input-check",".input-flag"].join(",");function hn({children:t,page:e}){const{current:n}=pt(cn()),r=pt(),i=an(),o=ft((()=>{var t;const e=null===(t=r.current)||void 0===t?void 0:t.querySelector("form");e&&e.dispatchEvent(function(t){let e;return"function"==typeof Event?e=new Event(t,{cancelable:!0}):(e=document.createEvent("Event"),e.initEvent(t,!0,!0)),e}("submit"))}),[]);return R("div",Object.assign({ref:r,onClick:async t=>{var r;const s=(null===(r=e.data)||void 0===r?void 0:r.backgroundActions)||[];s.length&&!function(t){for(;t;){if(t.matches(dn))return!0;t=t.parentElement}return!1}(t.target)&&(await i(s,n),s.some((t=>"submit"===t.type))&&o())},className:"container"},{children:[R(un,{name:n},void 0),t]}),void 0)}function pn(...t){return t.filter(Boolean).join(" ")}const gn=/[A-Z]/g;function fn(t,e,n){const r={};r[e]=n;const i=/^(-?\d+)(.+)?$/.exec(n);if(i){const[,n,o=""]=i;if("%"===o){const i=parseFloat(n);r.transform=`translate${t}(${"right"==e||"bottom"==e?i:-i}${o})`}}return r}function mn(t,e){let n={};const r="X"===t?"left":"top",i="translate"+t,o=e.split(/\s+(.*)/,2);if(1===o.length)e===r?n[r]="0":"right"===e||"bottom"===e?(n[r]="100%",n.transform=i+"(-100%)"):"center"===e?(n[r]="50%",n.transform=i+"(-50%)"):n=fn(t,r,e);else if(2===o.length){const[e,r]=o;n=fn(t,e,r)}return n}function vn({style:t={},opacity:e=1,flipX:n=!1,flipY:r=!1,angle:i="0deg",transformOrigin:o,zIndex:s=0,size:a="",positionX:c="0",positionY:l="0",objectFit:u="fill",objectPosition:d="50% 50%",src:h,previewName:p}){const g=Object.assign(Object.assign({position:"absolute",objectFit:u,objectPosition:d},function(t,e){const n=mn("X",t),r=mn("Y",e);return Object.assign(Object.assign(Object.assign({},n),r),{transform:pn(n.transform,r.transform)})}(c,l)),t),[f,m=f]=a.match(/calc\(.+?\)|\S+/gi)||[""];f&&m&&(g.width=f,g.height=m),s&&(g.zIndex=s.toString()),isFinite(e)&&1!==e&&(g.opacity=e.toString()),o&&(g.transformOrigin=o),g.transform=pn(g.transform,n?"scaleX(-1)":"",r?"scaleY(-1)":"",parseInt(i)?`rotate(${i})`:"");const v=Object.keys(g).reduce(((t,e)=>t+`${function(t,e="-"){return t.replace(gn,((t,n)=>(n?e:"")+t.toLowerCase()))}(e)}:${g[e]};`),"");return R("img",Object.assign({src:h,className:"image",style:v},{}),void 0)}function bn(){const{widgetId:t}=qt(),e=Mt((e=>Ut(e,t))),{images:n=[]}=Ue(e),r=n.filter((t=>!t.hidden));return 0===r.length?null:R("div",Object.assign({className:"images"},{children:r.map(((t,e)=>{var{actions:n}=t,r=Object(Pe.a)(t,["actions"]);return R(vn,Object.assign({previewName:"images."+e},r),e+r.src)}))}),void 0)}function _n(t){return R("button",Object.assign({type:"button",className:"close"},t),void 0)}function wn(t){return R("button",Object.assign({type:"button",className:"back"},t),void 0)}function yn(t){var{collapsed:e}=t,n=Object(Pe.a)(t,["collapsed"]);const r=De()("caret",e&&"collapsed");return R("button",Object.assign({type:"button",className:r},n),void 0)}function xn(t){const{layout:e,hasPreviousPage:n,page:r,className:i,innerRef:o,children:s}=t,a="inline"!==e,c=an();return(t=>{ht((()=>{if("modal"===t||"fullscreen"===t)return tn({overflow:"hidden"}),()=>tn({overflow:null})}),[t])})(e),R("div",Object.assign({ref:o,className:i,role:"dialog"},{children:R(hn,Object.assign({page:r},{children:[R(bn,{},void 0),R("div",Object.assign({className:"body"},{children:s}),void 0),n&&R(wn,{onClick:()=>c([{type:"back"}])},void 0),a&&R(_n,{onClick:()=>c([{type:"close"}])},void 0)]}),void 0)}),void 0)}const{Provider:kn,Consumer:On}=L({slots:{}});function Sn(t,e){const[n,r]=[O(t),O(e)];return n.length===r.length&&n.every(((t,e)=>{const n=r[e];if(i(t)&&i(n)){const e=t.props,{children:r}=e,i=Object(Pe.a)(e,["children"]),o=n.props,{children:s}=o,a=Object(Pe.a)(o,["children"]);return t.type===n.type&&t.key===n.key&&function(t,e){if(t===e)return!0;if("object"!=typeof t||!t||"object"!=typeof e||!e)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;const i={}.hasOwnProperty.bind(e);for(let o=0;o<n.length;o++){const r=n[o];if(!i(r))return!1;if(t[r]!==e[r])return!1}return!0}(i,a)&&Sn(r,s)}return t===n}))}class jn extends v{constructor(t,e){super(t,e),this.state={slots:{},take:(t,e)=>{Sn(this.state.slots[t],e)||this.setState((n=>({slots:Object.assign(Object.assign({},n.slots),{[t]:e})})))}}}render(t){return R(kn,Object.assign({value:this.state},{children:t.children}),void 0)}}function Cn(t){return R(On,{children:e=>O(e.slots[t.name]||t.children)[0]},void 0)}function En(t){return R(On,{children:e=>(null==e?void 0:e.take)?(e.take(t.slot,t.children),null):O(t.children)[0]},void 0)}function Tn(t){const{hasPreviousPage:e,page:n,expanded:r,className:i,innerRef:o,children:s}=t,a=an(),[c,l]=dt(r),u=ft((t=>{t.stopPropagation(),l((t=>!t))}),[]),d=ft((t=>(t.stopPropagation(),a([{type:"back"}]))),[a]),h=De()(i,c?"expanded":"collapsed");return R(jn,{children:R("div",Object.assign({ref:o,className:h,role:"dialog"},{children:R(hn,Object.assign({page:n},{children:[R(bn,{},void 0),R("div",Object.assign({className:"header",onClick:u},{children:[R(Cn,{name:"title"},void 0),e&&c&&R(wn,{onClick:d},void 0),R(yn,{collapsed:!c},void 0)]}),void 0),R("div",Object.assign({className:"body"},{children:s}),void 0)]}),void 0)}),void 0)},void 0)}function Pn(t){return R("div",Object.assign({"aria-hidden":"true"},t),void 0)}function In(t){return R(Pn,Object.assign({className:"overlay"},{children:R(xn,Object.assign({layout:"modal"},t),void 0)}),void 0)}function An(t){var{layout:e,className:n}=t,r=Object(Pe.a)(t,["layout","className"]);const i=Object.assign({className:De()("root",n)},r);switch(e){case"modal":return R(In,Object.assign({},i),void 0);case"panel":return R(Tn,Object.assign({},i),void 0);default:return R(xn,Object.assign({layout:e},i),void 0)}}const Nn=(t,{data:e,valid:n})=>async(r,i)=>{if(r(It(t,{data:e,valid:n})),!n)return!1;const o=!function({activePage:t,pages:e}){return e.slice(t+1).some((t=>function({data:{backgroundActions:t=[],buttons:e=[]}={}}){return e.filter((t=>t.visible)).map((t=>t.actions)).reduce(((t,e)=>t.concat(e)),[]).concat(t).some((t=>"submit"===t.type))}(t)))}(i().widgets[t]),s=r((t=>(e,n)=>{const{activePage:r}=n().widgets[t];return e(function(t){return Ct("widgets/GO_TO_NEXT_PAGE",{id:t})}(t)),r!==n().widgets[t].activePage})(t));if(o){const e=await r(((t,e=!1)=>async(n,r,i)=>{const o=r().widgets[t];return!o.formState.sent&&(n(It(o.id,{sending:!e})),await i.sendData(o.id,function(t){const{data:e}=t.formState;return t.pages.map((t=>{var e;return(null===(e=t.data)||void 0===e?void 0:e.fields)||[]})).reduce(((t,e)=>t.concat(e)),[]).reduce(((t,n)=>{const r=function(t,e){const{value:n}=e||{value:[]};return"flag"==t.type?n.length>0:n.length>0?function({type:t,options:e}){return"rating"==t||(null==e?void 0:e.length)>0}(t)?n.reduce(((t,e)=>(t[e]=!0,t)),{}):n[0]:null}(n,e[n.name]);return null!==r&&(t[n.name]=r),t}),{})}(o)),await n(nn(o.id)),n(It(o.id,{sending:!1,sent:!0})),!0)})(t,s));return await r((a=t,async(t,e)=>{const{pendingActions:{actions:n=[],origin:r}={}}=e().widgets[a];return t(At(a,[])),t(sn(a,n,r,!0))})),s||r(function(t){return Ct("widgets/RESET",{id:t})}(t)),e}var a;return!0},$n=/^(?:submit|button|image|reset|file)$/i,Dn=/^(?:input|select|textarea)/i,Ln=/^(?:checkbox|radio)$/i;function Rn(t){const{type:e,nodeName:n,name:r}=t;return!!r&&Dn.test(n)&&!$n.test(e)}const Wn=()=>{const{widgetId:t}=qt(),e=Mt((e=>Ut(e,t).formState)),n=Wt(),r=pt(e);return r.current=e,{handleSubmit:ft((e=>async r=>{r.preventDefault();const i=r.target,o=i.checkValidity(),s=function(t){return Array.from(t.elements).filter(Rn).reduce(((t,e)=>{const{name:n,validity:r}=e,i=function(t){return t.checked||!Ln.test(t.type)?t.value:null}(e),o=t[n]||{value:[],valid:!0};return t[n]={value:[...o.value,...null!==i?[i]:[]],valid:o.valid&&r.valid},t}),{})}(i);await n(Nn(t,{data:s,valid:o})),null==e||e()}),[n,t]),setValue:ft(((e,r)=>{n(function(t,e,n){return Ct("widgets/SET_FORM_FIELD_VALUE",{id:t,fieldName:e,value:n})}(t,e,r))}),[n,t]),getValue:ft((t=>{var e;const n=r.current.data[t];return(null===(e=null==n?void 0:n.value)||void 0===e?void 0:e[0])||""}),[]),getMultiValue:ft((t=>{const e=r.current.data[t];return(null==e?void 0:e.value)||[]}),[]),getValidity:ft((t=>{const{valid:e=!0}=r.current.data[t]||{};return e}),[]),getFormFlags:ft((()=>{const t=r.current,{data:e}=t;return Object(Pe.a)(t,["data"])}),[])}},Mn=L(null);var Un=Mn,Fn=function(t){var{children:e}=t,n=Object(Pe.a)(t,["children"]);return R(Un.Provider,Object.assign({value:n},{children:e}),void 0)};function Vn({children:t}){const e=Wn(),n=function(){const t=pt(!1);return ht((()=>(t.current=!0,()=>{t.current=!1})),[]),ft((()=>t.current),[])}(),[r,i]=dt({submitting:!1,submitted:!1}),{valid:o=!0,pristine:s=!0}=e.getFormFlags(),{submitting:a,submitted:c}=r;return R(Fn,Object.assign({},e,{children:R("form",Object.assign({noValidate:!0,onSubmit:t=>{const r=t.target;i({submitting:!0,submitted:!1}),e.handleSubmit((()=>{n()&&(r.offsetHeight,i({submitting:!1,submitted:!0}))}))(t)},className:De()("form",{valid:o,invalid:!o,pristine:s,dirty:!s,submit:!a&&c,submitting:a})},!1,{children:t}),void 0)}),void 0)}function zn(t){return R("svg",Object.assign({className:"success-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 70 70"},t,{children:[R("path",{d:"M35,60 C21.1928813,60 10,48.8071187 10,35 C10,21.1928813 21.1928813,10 35,10 C48.8071187,10 60,21.1928813 60,35 C60,48.8071187 48.8071187,60 35,60 Z M23.6332378,33.2260427 L22.3667622,34.7739573 L34.1433655,44.40936 L47.776114,27.6305926 L46.223886,26.3694074 L33.8566345,41.59064 L23.6332378,33.2260427 Z"},void 0),R("circle",{cx:"35",cy:"35",r:"24"},void 0),R("polyline",{points:"23 34 34 43 47 27"},void 0)]}),void 0)}const Hn=()=>{const{widgetId:t}=qt();return Mt((e=>Ut(e,t).formState.sending))?R(zn,{},void 0):null},Bn=()=>{const{widgetId:t}=qt(),e=Mt((e=>zt(e,t)));return{template:ft((t=>Object(xe.b)(t,e)),[e])}};function qn(t,e="p"){return function(n){var{Container:r=e,text:i}=n,o=Object(Pe.a)(n,["Container","text"]);const{template:s}=Bn(),a=function(){const t=an();return ft((function(e){if(e.defaultPrevented||0!==e.button)return;const n=function(t){for(;t&&(!t.nodeName||"a"!==t.nodeName.toLowerCase());)t=t.parentNode;return t}(e.target);return n?(n.blur(),e.preventDefault(),e.stopPropagation(),t([{type:"url",url:n.href,target:n.target||"_self"}])):void 0}),[t])}();return R(r,Object.assign({className:t,onClick:a,dangerouslySetInnerHTML:{__html:s(i)}},o),void 0)}}const Gn=qn("title","h1"),Jn=qn("description"),Kn=qn("note"),Yn=()=>mt(Mn);function Xn(t){var{field:{required:e,name:n,type:r="text",placeholder:i}}=t,o=Object(Pe.a)(t,["field"]);const{template:s}=Bn(),{getValue:a,setValue:c}=Yn(),l=a(n);return g("input",Object.assign({},o,{className:De()("input-text",{filled:!!l}),required:e,key:n,type:r,name:n,value:l,onInput:t=>c(n,{value:[t.target.value]}),placeholder:s(i)}))}function Qn(t){var{field:{required:e,name:n,type:r,options:i=[]}}=t,o=Object(Pe.a)(t,["field"]);const{template:s}=Bn(),{getMultiValue:a,setValue:c}=Yn(),l=a(n),u="radio"===r?e:e&&0===l.length,d=t=>{let e;const i=t.target.value;e="radio"===r?[i]:t.target.checked?[...l,i]:l.filter((t=>t!==i)),c(n,{value:e})};return R("div",Object.assign({className:"input-check"},o,{children:i.map((t=>{const e=-1!==l.indexOf(t.name);return R("label",{children:[R("input",{required:u,type:r,name:n,onChange:d,value:t.name,checked:e},void 0),R("span",{dangerouslySetInnerHTML:{__html:s(t.label)}},void 0)]},t.name)}))}),void 0)}const Zn=te((({value:t,label:e})=>R("option",Object.assign({value:t},{children:e}),void 0)));var tr=function(t){return R("svg",Object.assign({viewBox:"0 0 32 32"},t,{children:R("polygon",{points:"16 23.369 6.333 30.5 10.2 19.09 1.5 12.434 12.133 12.434 16 1.5 19.867 12.434 30.5 12.434 21.8 19.09 25.667 30.5"},void 0)}),void 0)};const er=[...new Array(10)],nr=~~(er.length/2),rr={textarea:function(t){var{field:{name:e,required:n,placeholder:r}}=t,i=Object(Pe.a)(t,["field"]);const{template:o}=Bn(),{getValue:s,setValue:a}=Yn(),c=s(e);return R("textarea",Object.assign({},i,{className:De()("input-textarea",{filled:!!c}),name:e,rows:4,placeholder:o(r),value:c,onInput:t=>a(e,{value:[t.target.value]}),required:n}),void 0)},radio:Qn,checkbox:Qn,rating:function(t){var{field:{required:e,name:n}}=t,r=Object(Pe.a)(t,["field"]);const{getValue:i,setValue:o}=Yn(),s=i(n),a=t=>o(n,{value:[t.target.value],valid:!0});return R("div",Object.assign({className:"input-rating"},r,{children:R("div",Object.assign({className:"stars"},{children:er.map(((t,r)=>{const i=(nr-~~(r/2)).toString();return r%2==0?R("input",{required:e,type:"radio",name:n,id:`${n}${i}`,value:i,onChange:a,checked:s===i},void 0):R("label",Object.assign({for:`${n}${i}`},{children:R(tr,{},void 0)}),void 0)}))}),void 0)}),void 0)},flag:function(t){var{field:{name:e,label:n,required:r}}=t,i=Object(Pe.a)(t,["field"]);const{template:o}=Bn(),{setValue:s,getValue:a}=Yn(),c=a(e);return R("div",Object.assign({},i,{className:De()("input-check","input-flag")},{children:R("label",{children:[R("input",{type:"checkbox",name:e,value:e,required:r,checked:!!c,onChange:t=>{const n=t.target.checked;s(e,{value:n?[e]:[]})}},void 0),R("span",{dangerouslySetInnerHTML:{__html:o(n)}},void 0)]},e)}),void 0)},select:function(t){var{field:{name:e,required:n,options:r=[]}}=t,i=Object(Pe.a)(t,["field"]);const{template:o}=Bn(),{getValue:s,setValue:a}=Yn(),c=s(e);return R("div",Object.assign({},i,{className:De()("input-select",{selected:!!c})},{children:R("select",Object.assign({required:n,name:e,value:c,onChange:t=>{const n=t.target.value;a(e,{value:[n]})}},{children:[(!c||!n)&&R(Zn,{value:"",label:"---"},void 0),r.map((t=>R(Zn,{value:t.name,label:o(t.label)},t.name)))]}),void 0)}),void 0)}};function ir(t){var{field:e}=t,n=Object(Pe.a)(t,["field"]);return R(rr[e.type]||Xn,Object.assign({field:e},n),void 0)}const or=qn("field-title","label");function sr(t){var{field:e,className:n}=t,r=Object(Pe.a)(t,["field","className"]);const{getValidity:i}=Yn(),o=i(e.name),s="flag"!==e.type&&e.label,a=De()("field",e.type,n,{"with-label":s},{valid:o,invalid:!o});return R("div",Object.assign({},r,{className:a},(e.name,{}),{children:[s&&R(or,{for:e.name,text:e.label},void 0),R(ir,{field:e,id:e.name},void 0)]}),void 0)}function ar({fields:t}){return 0===t.length?null:R("div",Object.assign({className:"fields"},{children:t.map(((e,n)=>R(sr,{className:De()({first:0===n,last:n===t.length-1}),field:e},void 0)))}),void 0)}var cr=function(t){return R("svg",Object.assign({viewBox:"0 0 20 18"},t,{children:R("path",{stroke:"none",fill:"currentColor","fill-rule":"nonzero",d:"M20 1l-6 14.8c-.1.4-.5.7-.9.8-.4.1-.9 0-1.2-.2l-5.6-3.6L19 1.3 4.6 11.6.6 9C0 8.7 0 8.3 0 7.9c0-.4.4-.8.8-1L19.4.6l.5.1c0 .1.1.3 0 .4zM6 17.4a1 1 0 0 1-.8 0 1 1 0 0 1-.6-.7l-.7-4v-.2l4.6 3.3-2.4 1.6z"},void 0)}),void 0)};const lr=["top","left","right","bottom"],ur=({name:t})=>{const e=ln(t),{ref:n,position:r}=(()=>{const[t,e]=dt("top");return{ref:ft((t=>{t&&e(((t,e="top")=>{const n=t.parentElement,r=null==n?void 0:n.closest(".container");if(!r)return e;const{width:i,height:o}=t.getBoundingClientRect(),s=n.getBoundingClientRect(),a=r.getBoundingClientRect(),c={top:s.top-a.top,left:s.left-a.left,bottom:a.bottom-s.bottom,right:a.right-s.right};return lr.find((t=>{const e=["top","bottom"].includes(t)?o:i;return c[t]>e}))||e})(t))}),[]),position:t}})();return e?R("div",Object.assign({ref:n,className:"tooltip tooltip-"+r},{children:e}),void 0):null},dr={primary:cr,secondary:function(t){return R("svg",Object.assign({viewBox:"0 0 24 24"},t,{children:R("g",Object.assign({fill:"none","fill-rule":"evenodd"},{children:R("path",{d:"M1.458 1.458l21.084 21.084m0-21.084L1.458 22.542"},void 0)}),void 0)}),void 0)},normal:cr};function hr({label:t}){const{template:e}=Bn();return R("span",{children:e(t)},void 0)}function pr(t){var{button:e,onAction:n}=t,r=Object(Pe.a)(t,["button","onAction"]);const{current:i}=pt(cn()),{type:o,label:s,actions:a=[]}=e,c=dr[o]||dr.primary,l=a.some((t=>"submit"===t.type))?"submit":"button",u=De()("button",o,!s&&"icon");return R("button",Object.assign({type:l,className:u,onClick:()=>n(a,i)},r,{children:[s?R(hr,{label:s},void 0):R(c,{},void 0),R(ur,{name:i},void 0)]}),void 0)}function gr(t){var{buttons:e}=t,n=Object(Pe.a)(t,["buttons"]);const r=an(),i=(e||[]).filter((({visible:t=!0})=>t));return 0===i.length?null:R("div",Object.assign({className:"buttons"},n,{children:i.map(((t,e)=>R(pr,Object.assign({button:t},{},{onAction:r}),e)))}),void 0)}const fr=te((function({page:t}){const{buttons:e=[],fields:n=[],title:r,description:i,note:o}=t.data,s=De()("content",{"no-fields":!n.length,"no-label":n.length&&!n[0].label});return R("div",Object.assign({className:s},{children:[R(En,Object.assign({slot:"title"},{children:r&&R(Gn,Object.assign({},{},{text:r}),void 0)}),void 0),i&&R(Jn,Object.assign({},{},{text:i}),void 0),R(Vn,{children:[R(ar,{fields:n},void 0),R(gr,{buttons:e},void 0)]},void 0),R(Hn,{},void 0),o&&R(Kn,Object.assign({},{},{text:o}),void 0)]}),void 0)}));function mr(t,e){"function"==typeof t?t(e):t&&(t.current=e)}const vr=re((function({className:t,widget:e},n){const{ref:r}=(()=>{const t=Wt(),{widgetId:e}=qt();return((t={})=>{const e=pt();e.current=t;const n=pt(null);return{ref:ft((t=>{let r=0;const i=()=>{const{onAnimationStart:t}=e.current;0==r++&&(null==t||t())},o=()=>{const{onAnimationEnd:t}=e.current;0==--r&&(null==t||t())};n.current!==t&&(n.current&&(n.current.removeEventListener("animationstart",i),n.current.removeEventListener("animationend",o)),n.current=t,n.current&&(n.current.addEventListener("animationstart",i),n.current.addEventListener("animationend",o)))}),[])}})({onAnimationStart:()=>t(Tt(e,!0)),onAnimationEnd:()=>t(Tt(e,!1))})})(),{ref:i}=(()=>{const t=pt(Se);return{ref:ft((e=>{t.current(),e&&(t.current=function(t){if(!t)return()=>{};const e=t=>t.stopPropagation(),n=!!Object(ke.a)().events.passiveSupported&&{passive:!0,capture:!1};return Oe.forEach((r=>t.addEventListener(r,e,n))),()=>{Oe.forEach((n=>t.removeEventListener(n,e)))}}(e))}),[])}})(),{layout:o,activePage:s,pages:a,preview:c,formState:l}=e,u=a[s],d=s>0&&(!l.sent||!1),h=De()(function(t){const{activePage:e,pages:n,formState:r}=t,{sending:i,sent:o}=r,s=n[e];return De()(s.name||"page-"+(e+1),"page-"+(e===n.length-1?"last":e?"middle":"first"),i&&"form-sending",o&&"form-sent")}(e),t),p=ft((t=>{mr(n,t),mr(r,t),mr(i,t)}),[]);return R(An,Object.assign({innerRef:p,className:h,layout:o,expanded:null==c?void 0:c.expanded,hasPreviousPage:d,page:u},{children:R(fr,{page:u},s)}),void 0)})),br="preEnter",_r="entering",wr="entered",yr="preExit",xr="exiting",kr="exited",Or="unmounted",Sr=({initialEntered:t=!0,mountOnEnter:e=!1,unmountOnExit:n=!1,preEnter:r=!0,preExit:i=!0,enter:o=!0,exit:s=!0,timeout:a}={})=>{const[c,l]=function(n){const[r,i]=dt((()=>t?wr:e?Or:kr)),o=pt(null),s=ft(((t,e)=>{o.current=e,i(t)}),[]);return ht((()=>{o.current&&(o.current(r),o.current=null)}),[r]),[r,s]}(),u=pt(c),d=pt(),[h,p]=gt((()=>"object"==typeof a?[a.enter,a.exit]:[a,a]),[a]),g=ft((t=>{const e=(t,e)=>{d.current=window.setTimeout((()=>g(t)),e)};switch(t===kr&&n&&(t=Or),window.clearTimeout(d.current),l(u.current=t,(()=>{switch(t){case br:g(_r);break;case yr:g(xr)}})),t){case _r:h>=0&&e(wr,h);break;case xr:p>=0&&e(kr,p)}}),[l,h,p,n]),f=ft((()=>{switch(u.current){case br:case _r:g(wr);break;case yr:case xr:g(kr)}}),[g]),m=ft((t=>{const e=[br,_r,wr].includes(u.current);"boolean"!=typeof t&&(t=!e),t&&!e?g(o?r?br:_r:wr):!t&&e&&g(s?i?yr:xr:kr)}),[o,s,r,i,g]);return ht((()=>()=>window.clearTimeout(d.current)),[]),[c,m,f]},jr="transition",Cr=Math.ceil(1e3/60),Er=()=>{};function Tr(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max.apply(null,e.map(((e,n)=>Pr(e)+Pr(t[n]))))}function Pr(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}const Ir={preEnter:"before-enter enter-active",entering:"enter-active enter",preExit:"before-leave leave-active",exiting:"leave-active leave"},Ar=({in:t,appear:e=!1})=>{const[n,i,o]=Sr({initialEntered:!e&&t,mountOnEnter:!0,unmountOnExit:!0}),s=pt(null),a=ft((t=>{s.current=t}),[]),c=(t=>Ir[t]||"")(n);return ht((()=>i(t)),[t,i]),l=()=>{const t=s.current;if(t)return"exited"!==n&&"entered"!==n&&t.scrollTop,"entering"===n||"exiting"===n?function(t,e){const{type:n,timeout:r,propCount:i}=function(t){const e=window.getComputedStyle(t),n=(e.transitionDelay||"").split(", "),r=(e.transitionDuration||"").split(", "),i=Tr(n,r),o=(e.animationDelay||"").split(", "),s=(e.animationDuration||"").split(", "),a=Tr(o,s),c=Math.max(i,a),l=c>0?i>a?jr:"animation":null;return{type:l,timeout:c,propCount:l?l===jr?r.length:s.length:0}}(t);if(!n)return e(),Er;const o=n===jr?"transitionend":"animationend";let s=0,a=null;const c=()=>{a&&(window.clearTimeout(a),a=null),t.removeEventListener(o,u)},l=()=>{c(),e()},u=e=>{e.target===t&&++s>=i&&l()};return a=window.setTimeout((()=>{s<i&&l()}),r+Cr),t.addEventListener(o,u),()=>c()}(t,o):void 0},u=[n,o],d=ut(Z++,4),!r.__s&&yt(d.__H,u)&&(d.__=l,d.__H=u,tt.__h.push(d)),{isMounted:"unmounted"!==n,ref:a,className:c};var l,u,d},Nr=Object(xe.a)("getsitecontrol"),$r={before:["googleoff: all",...Nr?[`Created with ${Nr}.com`]:[]],after:["googleon: all"]},Dr=te((function({widget:t}){const{container:e,inline:n}=(t=>{const e=(t=>{const e=pt(Te(t));return ht((()=>{e.current=Te(t)}),[t]),e.current})(Yt(t));return{container:e||document.body,inline:!!e}})(t.id),{ref:r}=(t=>{const e=pt(je),n=pt(t);return ht((()=>{n.current=t}),[t]),{ref:ft((t=>{e.current(),t&&(e.current=function(t,{before:e=[],after:n=[]}){if(!t)return je;const r=e.map((t=>document.createComment(t))),i=n.map((t=>document.createComment(t)));return r.forEach((e=>t.parentNode.insertBefore(e,t))),i.forEach((e=>t.parentNode.insertBefore(e,t.nextSibling))),()=>{[...r,...i].forEach((t=>t.remove()))}}(t,n.current))}),[])}})($r),{ref:i,className:o,isMounted:s}=Ar({in:t.show,appear:!0});var a,c;return ht((()=>{const t=Kt(a)+"-open";return document.body.classList.toggle(t,c),()=>document.body.classList.remove(t)}),[a=t.id,c=s]),s?de(R(Ne,Object.assign({host:Ie,hostRef:r,id:Kt(t.id)},{children:R(Bt,Object.assign({widgetId:t.id},{children:[R(Ze,{widget:t,inline:n},void 0),R(vr,{className:o,widget:t,ref:i},void 0)]}),void 0)}),void 0),e):null})),Lr=()=>R(m,{children:(()=>{const t=Mt((t=>t.widgets));return Object.keys(t).map((e=>t[e])).sort(((t,e)=>(e.sort_order||0)-(t.sort_order||0)))})().map((t=>R(Dr,{widget:t},t.id+t.layout)))},void 0),Rr=({store:t})=>R(Ot,Object.assign({store:t},{children:R(Lr,{},void 0)}),void 0);class Wr{constructor(t,e){this._dispatch=e,this.date=new Date;const n=function(t){const e=function(t=[]){return t.map((t=>{const e=t.data.fields?Object.assign(Object.assign({},t.data),{fields:t.data.fields.map(Jt)}):t.data;return Object.assign(Object.assign({},t),{data:e})}))}(t.pages);return Object.assign(Object.assign({},t),{pages:e,pageStack:[],show:!0,animating:!1,activePage:Math.max(0,Math.min(0,e.length-1)),formState:{data:{},valid:!0}})}(t);var r;this._id=n.id,"inline"!==n.layout||(r=n.id,document.querySelector(Yt(r)))?(this.shown=!0,this._dispatch(function(t){return Ct("widgets/CREATE_OR_UPDATE",t)}(n))):this.shown=!1}close(){this._dispatch(function(t,e=!0){return Ct("widgets/SET_VISIBILITY",{id:t,show:e})}(this._id,!1))}}class Mr{constructor(t,{previewInteractive:e}){this._runtime=t,this._isRendered=!1,this._store=Rt(this._runtime)}isRendered(){return this._isRendered}render(t={}){this._isRendered=!0,this.updateContext(t),function(t){const e=document.readyState;"complete"!==e&&"interactive"!==e||setTimeout(t,0),document.addEventListener("DOMContentLoaded",t)}((()=>{const t=document.createDocumentFragment();document.body.appendChild(t),D(g(Rr,{store:this._store}),t)}))}async createWidget(t){return new Wr(t,this._store.dispatch)}updateContext(t){this._store.dispatch(Ct("templateTags/SET",t))}_enablePreviewMode(){r.vnode=t=>{var e;return null===(e=t.props)||void 0===e||e.previewField,t}}}function Ur(t,e){return new Mr(t,e)}!function(){const t=Array.prototype;if(t.toJSON){const e=JSON.stringify;JSON.stringify=function(n,...r){const i=t.toJSON;delete t.toJSON;const o=e(n,...r);return t.toJSON=i,o}}}();const Fr=(()=>{let t;return e=>(t||(t=async function(t,e){return new(await Promise.resolve().then(n.bind(null,"NkQW")).then((t=>t.WidgetRuntime)))(t,e)}({createWidgetRenderer:Ur},e)),t)})();let Vr;const zr=window,Hr=function(...t){if(Vr)return Vr.apiCall(t);Hr.q.push(t)};Hr.q=[],Hr.start=async({runtime:t,widgets:e=[]}={})=>{zr.document.documentMode||(Vr||(Vr=await Fr(t)),Vr.run(e),Hr.q&&(Hr.q.forEach((t=>Hr(...t))),delete Hr.q))};const Br=zr.gsc;if(!Br||!Br.start){const t=Br&&Br.q||[];Hr.q=[...t],zr.gsc=Hr}},vM0s:function(t,e,n){(function(t){var r;!function(i){e&&e.nodeType,t&&t.nodeType;var o="object"==typeof global&&global;o.global!==o&&o.window!==o&&o.self;var s,a=2147483647,c=36,l=/^xn--/,u=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,g=String.fromCharCode;function f(t){throw new RangeError(h[t])}function m(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function v(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+m((t=t.replace(d,".")).split("."),e).join(".")}function b(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function _(t){return m(t,(function(t){var e="";return t>65535&&(e+=g((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+g(t)})).join("")}function w(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function y(t,e,n){var r=0;for(t=n?p(t/700):t>>1,t+=p(t/e);t>455;r+=c)t=p(t/35);return p(r+36*t/(t+38))}function x(t){var e,n,r,i,o,s,l,u,d,h,g,m=[],v=t.length,b=0,w=128,x=72;for((n=t.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&f("not-basic"),m.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<v;){for(o=b,s=1,l=c;i>=v&&f("invalid-input"),((u=(g=t.charCodeAt(i++))-48<10?g-22:g-65<26?g-65:g-97<26?g-97:c)>=c||u>p((a-b)/s))&&f("overflow"),b+=u*s,!(u<(d=l<=x?1:l>=x+26?26:l-x));l+=c)s>p(a/(h=c-d))&&f("overflow"),s*=h;x=y(b-o,e=m.length+1,0==o),p(b/e)>a-w&&f("overflow"),w+=p(b/e),b%=e,m.splice(b++,0,w)}return _(m)}function k(t){var e,n,r,i,o,s,l,u,d,h,m,v,_,x,k,O=[];for(v=(t=b(t)).length,e=128,n=0,o=72,s=0;s<v;++s)(m=t[s])<128&&O.push(g(m));for(r=i=O.length,i&&O.push("-");r<v;){for(l=a,s=0;s<v;++s)(m=t[s])>=e&&m<l&&(l=m);for(l-e>p((a-n)/(_=r+1))&&f("overflow"),n+=(l-e)*_,e=l,s=0;s<v;++s)if((m=t[s])<e&&++n>a&&f("overflow"),m==e){for(u=n,d=c;!(u<(h=d<=o?1:d>=o+26?26:d-o));d+=c)k=u-h,x=c-h,O.push(g(w(h+k%x,0))),u=p(k/x);O.push(g(w(u,0))),o=y(n,_,r==i),n=0,++r}++n,++e}return O.join("")}s={version:"1.4.1",ucs2:{decode:b,encode:_},decode:x,encode:k,toASCII:function(t){return v(t,(function(t){return u.test(t)?"xn--"+k(t):t}))},toUnicode:function(t){return v(t,(function(t){return l.test(t)?x(t.slice(4).toLowerCase()):t}))}},void 0===(r=function(){return s}.call(e,n,e,t))||(t.exports=r)}()}).call(this,n("aYSr")(t))}});
//# sourceMappingURL=runtime.d11acc1.js.map